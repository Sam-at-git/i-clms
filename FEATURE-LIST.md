# i-CLMS 智能合同全生命周期管理系统 - 功能列表

> **版本**: v2.0（增强版）
> **最后更新**: 2026-01-19
> **核心增强**: 结合《合同信息结构.json》，完善了300+字段的智能提取能力

---

## 🎯 文档核心亮点

本文档详细描述了i-CLMS系统的完整功能清单，特别强化了以下能力：

### ✨ 智能合同信息提取（业界领先）
- **300+字段提取能力**：覆盖23大类信息维度
- **三层混合策略**：程序解析 → LLM验证 → LLM完整提取
- **完整的合同要素**：从基本信息到复杂条款，全面覆盖
- **质量保证机制**：置信度评分、完整性检查、位置追溯

### 📋 关键章节导航

| 章节 | 主题 | 核心内容 |
|------|------|----------|
| **第1章** | 用户认证与权限 | 登录、用户管理、部门管理、角色体系 |
| **第2章** | 合同管理核心 | CRUD、类型管理、高级条款（IP、SLA、责任等） |
| **第3章** | 智能文档处理 ⭐ | **300+字段提取**、混合解析策略、LLM集成 |
| **第4章** | 智能标签与分类 | 标签管理、自动分类、画像生成 |
| **第5章** | 财务管理 | 收入统计、现金流预测、逾期预警 |
| **第6章** | 交付管理 | 项目概览、里程碑跟踪、资源利用率 |
| **第7章** | 销售管理 | 客户360°、续约管理、业绩分析 |
| **第8章** | 法务合规 | 合规扫描、风险评分、证据链 |
| **第9章** | 市场知识库 | 合同搜索、案例库、标签统计 |
| **第10章** | 管理驾驶舱 | 健康度评估、风险热力图、KPI |
| **第11章** | 风险引擎 | 智能评估、条款检测、预警系统 |
| **第12章** | 向量搜索 | 语义搜索、相似合同推荐 |
| **第13章** | 数据分析 | 多维分析、趋势预测 |
| **第14章** | 审计日志 | 操作记录、查询筛选 |
| **第15章** | 系统管理 | 健康检查、文件管理、数据库、GraphQL |
| **第16章** | 客户管理 | 客户信息、关系跟踪 |
| **第17章** | 前端界面 | 导航、可视化、表单、交互组件 |
| **第18章** | API接口 | 90+ GraphQL操作统计 |
| **第19章** | 信息提取能力 ⭐ | **300+字段详解、提取方法、质量保证** |

---

## 1. 用户认证与权限管理

### 1.1 用户认证
- 1.1.1 用户登录（邮箱+密码）
- 1.1.2 用户注册
- 1.1.3 JWT Token认证
- 1.1.4 首次登录强制修改密码
- 1.1.5 修改密码功能
- 1.1.6 获取当前用户信息
- ** 1.1.7 ** 忘记密码，找回密码（发邮件给用户重置新的随机密码）

### 1.2 用户管理（仅ADMIN）
- 1.2.1 用户列表查看（支持分页和筛选）
- 1.2.2 创建新用户（自动生成临时密码）
- 1.2.3 编辑用户信息
- 1.2.4 启用/禁用用户
- 1.2.5 重置用户密码
- 1.2.6 按部门和角色筛选用户

### 1.3 权限角色体系
- 1.3.1 系统管理员（ADMIN）- 完整权限
- 1.3.2 部门管理员（DEPT_ADMIN）- 部门级权限
- 1.3.3 普通用户（USER）- 基础操作权限

### 1.4 部门管理（仅ADMIN）
- 1.4.1 部门列表查看
- 1.4.2 创建新部门
- 1.4.3 编辑部门信息
- 1.4.4 删除部门（软删除）
- 1.4.5 部门代码管理

---

## 2. 合同管理核心功能

### 2.1 合同基础操作
- 2.1.1 合同列表展示（分页、排序）
- 2.1.2 合同详情查看
- 2.1.3 创建新合同
- 2.1.4 编辑合同信息
- 2.1.5 删除合同
- 2.1.6 按合同号查询
- 2.1.7 检测合同号重复

### 2.2 合同高级筛选
- 2.2.1 按合同类型筛选
- 2.2.2 按合同状态筛选
- 2.2.3 按签署日期范围筛选
- 2.2.4 按客户名称筛选
- 2.2.5 按部门筛选
- 2.2.6 按金额范围筛选

### 2.3 合同类型管理

#### 2.3.1 人力框架合同（STAFF_AUGMENTATION）
- 2.3.1.1 工时上限设定（月度/年度）
- 2.3.1.2 费率表管理
  - 2.3.1.2.1 按岗位/级别定义费率
  - 2.3.1.2.2 支持时薪/日薪/月薪
  - 2.3.1.2.3 费率生效日期管理
- 2.3.1.3 结算周期配置
- 2.3.1.4 工时审批流程定义
- 2.3.1.5 人员更换流程配置
- 2.3.1.6 调价机制说明

#### 2.3.2 项目外包合同（PROJECT_OUTSOURCING）
- 2.3.2.1 SOW（工作说明书）管理
- 2.3.2.2 交付物清单定义
- 2.3.2.3 里程碑管理
  - 2.3.2.3.1 里程碑创建（名称、序号）
  - 2.3.2.3.2 里程碑金额和付款比例
  - 2.3.2.3.3 里程碑计划日期设定
  - 2.3.2.3.4 里程碑实际日期记录
  - 2.3.2.3.5 里程碑状态跟踪（待开始/进行中/已交付/已验收/被拒绝）
  - 2.3.2.3.6 里程碑交付物关联
- 2.3.2.4 验收标准定义
- 2.3.2.5 验收流程配置
- 2.3.2.6 变更管理流程

#### 2.3.3 产品购销合同（PRODUCT_SALES）
- 2.3.3.1 产品明细管理
  - 2.3.3.1.1 产品名称和规格
  - 2.3.3.1.2 数量和单位
  - 2.3.3.1.3 含税/不含税单价
  - 2.3.3.1.4 小计自动计算
- 2.3.3.2 交付信息管理
  - 2.3.3.2.1 交付内容说明
  - 2.3.3.2.2 交付日期
  - 2.3.3.2.3 交付地点
  - 2.3.3.2.4 运输责任方
- 2.3.3.3 知识产权条款
- 2.3.3.4 保修期限设定
- 2.3.3.5 售后服务条款

### 2.4 合同关系管理
- 2.4.1 主合同管理
- 2.4.2 补充协议管理
- 2.4.3 补充协议关联到主合同
- 2.4.4 补充协议列表查看

### 2.5 合同财务信息
- 2.5.1 含税金额管理
- 2.5.2 不含税金额管理
- 2.5.3 税率设定
- 2.5.4 税额自动计算
- 2.5.5 币种管理
- 2.5.6 付款方式设定
- 2.5.7 付款条件描述

### 2.6 合同时间管理
- 2.6.1 签署日期记录
- 2.6.2 生效日期设定
- 2.6.3 终止日期设定
- 2.6.4 合同期限描述

### 2.7 合同其他属性
- 2.7.1 我方主体设定
- 2.7.2 客户信息关联
- 2.7.3 归属部门设定
- 2.7.4 行业分类
- 2.7.5 销售人员记录
- 2.7.6 签订地点
- 2.7.7 合同份数

### 2.8 合同高级条款管理

#### 2.8.1 知识产权管理
- 2.8.1.1 背景IP记录（甲乙双方）
- 2.8.1.2 前景IP所有权设定
- 2.8.1.3 许可授予条款（类型、地域、期限、领域）
- 2.8.1.4 第三方IP许可管理
- 2.8.1.5 保密信息定义和期限

#### 2.8.2 服务级别协议（SLA）管理
- 2.8.2.1 SLA指标定义和目标
- 2.8.2.2 测量方法和报告频率
- 2.8.2.3 罚则和奖励机制
- 2.8.2.4 响应时间矩阵（P1-P4）
- 2.8.2.5 可用性目标和维护窗口

#### 2.8.3 风险和责任条款
- 2.8.3.1 责任上限设定（类型和金额）
- 2.8.3.2 责任排除项管理
- 2.8.3.3 赔偿条款（赔偿方、范围、程序）
- 2.8.3.4 保险要求（类型、保额、证书）
- 2.8.3.5 担保条款（类型、期限、补救措施）

#### 2.8.4 终止和争议条款
- 2.8.4.1 便利终止条款（通知期、终止费用）
- 2.8.4.2 违约终止条款（定义、治愈期）
- 2.8.4.3 终止后义务（过渡服务、数据返还）
- 2.8.4.4 争议解决机制（调解/仲裁/诉讼）
- 2.8.4.5 管辖法律和管辖权

#### 2.8.5 特殊合规条款
- 2.8.5.1 数据保护和GDPR合规
- 2.8.5.2 出口管制合规
- 2.8.5.3 反腐败条款
- 2.8.5.4 业务连续性和灾备要求

#### 2.8.6 变更和人员管理
- 2.8.6.1 变更控制流程
- 2.8.6.2 关键人员管理（资格、替换流程）
- 2.8.6.3 人员配置和培训要求
- 2.8.6.4 转让和分包管理

#### 2.8.7 通知和其他条款
- 2.8.7.1 通知联系点管理
- 2.8.7.2 不可抗力条款
- 2.8.7.3 完整协议和修改方式
- 2.8.7.4 电子签名和副本管理

---

## 3. 智能文档处理

### 3.1 文件存储管理
- 3.1.1 文件上传（支持PDF和DOCX）
- 3.1.2 文件下载（预签名URL）
- 3.1.3 文件删除
- 3.1.4 文件存在性检查
- 3.1.5 MinIO对象存储集成
- 3.1.6 预签名URL过期管理（默认1小时）

### 3.2 程序化文档解析
- 3.2.1 DOCX文档解析
  - 3.2.1.1 mammoth解析器
  - 3.2.1.2 docx4js解析器（降级）
  - 3.2.1.3 pizzip解析器（降级）
- 3.2.2 PDF文档解析
  - 3.2.2.1 pdf-parse提取
- 3.2.3 文本内容提取
- 3.2.4 结构化字段提取（100+字段）

#### 3.2.4.1 合同识别信息提取
- 合同编号
- 合同标题
- 合同类型（人力外包/项目外包/软硬件买卖/混合）
- 合同子类型
- 版本号
- 有效语言（中文/英文/双语）

#### 3.2.4.2 签约方信息提取
- **甲方（首方）信息**
  - 企业名称
  - 法律实体类型（有限责任公司/股份有限公司/个人独资）
  - 统一社会信用代码/注册号
  - 注册地址
  - 运营地址
  - 联系人姓名、职位、电话、邮箱
  - 授权签署人姓名、职位、签署日期
- **乙方（次方）信息**
  - 同甲方结构
- **附加方信息**
  - 角色类型（担保方/见证方/第三方服务商）
  - 完整企业信息

#### 3.2.4.3 合同期限信息提取
- 合同签订日期（执行日期）
- 合同生效日期
- 合同开始日期
- 合同终止日期
- 合同期限（数值+单位：月/年/天）
- 自动续约条款
  - 是否自动续约
  - 续约期限
  - 续约通知期（天数/月数）

#### 3.2.4.4 工作范围（SOW）信息提取
- 工作描述
- 交付物清单
  - 交付物ID、名称、描述
  - 规格说明
  - 数量
  - 质量标准
  - 验收标准
- 工作排除项
- 工作假设条件
- 工作约束条件

#### 3.2.4.5 服务级别协议（SLA）提取
- **SLA指标**
  - 指标名称
  - 目标值
  - 测量方法
  - 报告频率
  - 罚则（阈值、金额、类型）
  - 奖励（阈值、金额）
- **响应时间要求**
  - 事件级别（P1/P2/P3/P4）
  - 响应时间
  - 解决时间
- **可用性要求**
  - 目标可用性百分比
  - 维护窗口

#### 3.2.4.6 商业条款提取
- **定价结构**
  - 定价类型（固定总价/时间材料/成本加成/混合）
  - 币种
  - 合同总价
  - 价格明细分解
    - 项目/产品名称、描述
    - 数量、单价、金额
    - 税率、税额
- **付款条款**
  - 付款计划表
    - 里程碑名称、描述
    - 付款比例、金额
    - 到期日期、触发条件
    - 发票要求
  - 付款方式（电汇/支票/信用证）
  - 付款账期（天数）
  - 逾期付款
    - 利息率
    - 计算方法
  - 预付款
    - 金额、比例
    - 担保方式（保函/保证金）
  - 质保金/保留金
    - 比例、金额
    - 释放条件
- **价格调整条款**
  - 是否有价格升降条款
  - 调整公式
  - 调整频率

#### 3.2.4.7 知识产权条款提取
- **背景知识产权**
  - 甲方背景IP
  - 乙方背景IP
- **前景知识产权**
  - 所有权归属（甲方/乙方/共有）
  - 许可授予
    - 许可类型（独占/非独占/排他）
    - 地域范围
    - 许可期限
    - 使用领域
    - 许可费/特许权使用费
    - 是否可再许可
- **第三方知识产权**
  - 所需许可
  - 责任归属
- **保密信息**
  - 保密定义
  - 保密义务
  - 保密例外
  - 保密期限

#### 3.2.4.8 担保条款提取
- 担保方（甲方/乙方）
- 担保类型（服务保证/产品保证/合规保证）
- 担保描述
- 担保期限
- 补救措施

#### 3.2.4.9 责任限制条款提取
- **责任上限**
  - 上限类型（合同总额/实际损失/固定金额）
  - 上限金额
  - 责任排除项（故意违约/重大过失/人身伤害/知识产权侵权/保密义务违反）
- **赔偿条款**
  - 赔偿方
  - 被赔偿方
  - 赔偿范围
  - 赔偿程序
- **保险要求**
  - 保险类型（职业责任险/一般责任险/产品责任险）
  - 最低保额
  - 被保险方
  - 是否需要保险证书

#### 3.2.4.10 合同终止条款提取
- **便利终止**
  - 是否允许
  - 通知期
  - 终止费用
- **违约终止**
  - 重大违约定义
  - 治愈期
  - 破产事件
  - 控制权变更
- **终止后义务**
  - 过渡服务
  - 数据返还
  - 存续条款及期限

#### 3.2.4.11 争议解决条款提取
- 管辖法律
- 管辖权/法院
- **争议解决流程**
  - 升级程序
  - 调解
    - 是否必须调解
    - 调解员选择
  - 仲裁
    - 仲裁机构
    - 仲裁规则
    - 仲裁地
    - 仲裁语言
    - 仲裁员人数
  - 诉讼
    - 管辖法院

#### 3.2.4.12 不可抗力条款提取
- 不可抗力定义
- 通知要求
- 法律后果
- 持续时间限制

#### 3.2.4.13 转让和分包条款提取
- 转让权利描述
- **分包条款**
  - 是否允许分包
  - 分包条件
  - 分包责任归属

#### 3.2.4.14 通知条款提取
- **联系点信息**
  - 相关方（甲方/乙方）
  - 通知地址
  - 电子邮箱
  - 联系电话
  - 有效时间
- 视为送达规则

#### 3.2.4.15 其他标准条款提取
- 是否为完整协议条款
- 合同修改方式
- 可分割性条款
- 弃权条款
- 是否允许副本
- 是否允许电子签名
- 标题说明

#### 3.2.4.16 附件和附录信息提取
- 附件编号/引用
- 附件标题
- 附件类型（服务范围/服务级别/价格清单/人员名单）
- 内容摘要
- 附件文件引用

#### 3.2.4.17 签名信息提取
- 签署方（甲方/乙方）
- 签署人姓名
- 签署人职位
- 签署日期
- 签署方式（湿签/电子签）
- 见证人信息（姓名、关系）

#### 3.2.4.18 特殊条款提取
- **数据保护条款**
  - GDPR合规
  - 数据处理协议
  - 数据泄露通知要求
- **出口管制条款**
  - 是否需要合规
  - 出口分类
- **反腐败条款**
  - 声明和陈述
  - 合规证书
- **业务连续性条款**
  - 业务连续性计划要求
  - 恢复时间目标（RTO）

#### 3.2.4.19 绩效指标提取
- **关键绩效指标（KPI）**
  - KPI ID
  - KPI描述
  - 测量方式
  - 目标值
  - 测量频率
  - 报告格式
- **评审会议**
  - 会议频率
  - 参会人员
  - 会议议程

#### 3.2.4.20 变更控制提取
- 变更请求流程
- 变更定价方式
- 审批权限

#### 3.2.4.21 人员信息提取
- **关键人员**
  - 姓名
  - 角色
  - 资格要求
  - 替换流程
- 人员配置要求
- 培训要求

#### 3.2.4.22 实施计划提取
- 实施计划描述
- **实施里程碑**
  - 里程碑名称
  - 里程碑日期
  - 依赖关系
- **验收测试**
  - 验收标准
  - 验收流程
  - 补救措施

#### 3.2.4.23 提取元数据
- **条款位置引用**
  - 条款名称
  - 页码
  - 段落编号
  - 文本片段
- **模糊条款识别**
  - 条款引用
  - 问题描述
  - 建议

### 3.3 智能LLM解析

#### 3.3.1 完整性评分系统
- 3.3.1.1 基本信息评分（40分）
- 3.3.1.2 财务信息评分（30分）
- 3.3.1.3 时间信息评分（20分）
- 3.3.1.4 其他信息评分（10分）
- 3.3.1.5 总分计算（0-100分）

#### 3.3.2 混合解析策略
- 3.3.2.1 得分≥70分：直接使用程序解析结果
- 3.3.2.2 得分50-69分：LLM验证模式（检查并修正）
- 3.3.2.3 得分<50分：LLM完整提取模式
- 3.3.2.4 策略决策自动化

#### 3.3.3 智能分段处理
- 3.3.3.1 合同头部识别
- 3.3.3.2 财务条款识别
- 3.3.3.3 时间期限识别
- 3.3.3.4 类型特定详情识别
- 3.3.3.5 按语义边界分段

#### 3.3.4 LLM提供商支持
- 3.3.4.1 OpenAI集成（云端付费）
- 3.3.4.2 Ollama集成（本地免费）
- 3.3.4.3 提供商动态切换
- 3.3.4.4 统一OpenAI SDK接口

#### 3.3.5 LLM提取能力范围

**LLM支持提取的完整字段类别（23大类、300+细分字段）：**

1. **提取元数据**（提取ID、日期、方法、提取者、置信度、版本）
2. **合同识别信息**（合同号、标题、类型、子类型、版本号、有效语言）
3. **签约方信息**（甲方、乙方、附加方的完整企业和联系信息）
4. **合同期限**（执行/生效/开始/终止日期、期限、续约条款）
5. **工作范围**（描述、交付物、规格、质量标准、排除项、假设、约束）
6. **服务级别协议**（SLA指标、目标、罚则、奖励、响应时间、可用性）
7. **商业条款**（定价结构、付款计划、付款方式、逾期利息、预付款、质保金、价格调整）
8. **知识产权**（背景IP、前景IP、许可授予、第三方IP、保密信息）
9. **担保条款**（担保方、类型、描述、期限、补救措施）
10. **责任限制**（责任上限、排除项、赔偿、保险）
11. **合同终止**（便利终止、违约终止、终止后义务、存续条款）
12. **争议解决**（管辖法律、管辖权、调解、仲裁、诉讼）
13. **不可抗力**（定义、通知、后果、持续时间）
14. **转让和分包**（转让权、分包条件、责任归属）
15. **通知条款**（联系点、送达规则）
16. **其他标准条款**（完整协议、修改、可分割性、弃权、副本、电子签名）
17. **附件和附录**（附件编号、标题、类型、内容摘要）
18. **签名信息**（签署方、签署人、职位、日期、方式、见证人）
19. **特殊条款**（数据保护、出口管制、反腐败、业务连续性）
20. **绩效指标**（KPI定义、测量方式、目标、频率、评审会议）
21. **变更控制**（变更流程、定价、审批权限）
22. **人员管理**（关键人员、资格、替换、配置、培训）
23. **实施计划**（计划、里程碑、验收测试）

#### 3.3.6 解析结果返回
- 3.3.6.1 完整的结构化数据（符合合同信息结构schema）
- 3.3.6.2 整体置信度评分
- 3.3.6.3 各字段置信度详情
- 3.3.6.4 字段完整性评分
- 3.3.6.5 使用的策略说明
- 3.3.6.6 处理时间统计
- 3.3.6.7 分段数量统计
- 3.3.6.8 条款位置引用（页码、段落号）
- 3.3.6.9 模糊条款识别和建议

### 3.4 解析状态管理
- 3.4.1 待解析状态（PENDING）
- 3.4.2 解析中状态（PROCESSING）
- 3.4.3 解析完成状态（COMPLETED）
- 3.4.4 需人工审核状态（MANUAL_REVIEW）
- 3.4.5 解析失败状态（FAILED）
- 3.4.6 解析时间记录
- 3.4.7 解析置信度记录

---

## 4. 智能标签与分类

### 4.1 标签管理
- 4.1.1 标签列表查看
- 4.1.2 创建自定义标签
- 4.1.3 编辑标签信息
- 4.1.4 删除标签（软删除）
- 4.1.5 标签分类管理
- 4.1.6 标签颜色配置
- 4.1.7 按分类筛选标签
- 4.1.8 搜索标签
- 4.1.9 查看活跃/非活跃标签

### 4.2 合同标签操作
- 4.2.1 为合同分配单个标签
- 4.2.2 为合同批量分配标签
- 4.2.3 从合同移除标签
- 4.2.4 查看合同的所有标签
- 4.2.5 查看使用某标签的所有合同

### 4.3 智能分类功能
- 4.3.1 自动识别合同类型
- 4.3.2 自动识别行业分类
- 4.3.3 自动识别合同规模
- 4.3.4 返回分类置信度

### 4.4 智能标签提取
- 4.4.1 从合同内容提取关键词标签
- 4.4.2 识别标签分类
- 4.4.3 计算标签相关性置信度
- 4.4.4 区分系统标签和用户标签

### 4.5 合同画像生成
- 4.5.1 生成合同特征标签列表
- 4.5.2 提取关键词列表
- 4.5.3 识别合同特性
- 4.5.4 生成合同摘要

### 4.6 标签统计
- 4.6.1 获取所有标签分类
- 4.6.2 按分类统计标签数量
- 4.6.3 统计标签使用频次

---

## 5. 财务管理模块

### 5.1 收入统计分析
- 5.1.1 按合同类型统计收入
- 5.1.2 按客户统计收入
- 5.1.3 按月份统计收入
- 5.1.4 总收入计算
- 5.1.5 支持日期范围筛选
- 5.1.6 支持部门筛选

### 5.2 现金流管理
- 5.2.1 现金流预测（默认6个月）
- 5.2.2 预期收入计算
- 5.2.3 待收金额统计
- 5.2.4 已收金额统计
- 5.2.5 按月展示现金流趋势
- 5.2.6 自定义预测周期

### 5.3 应收账款管理
- 5.3.1 逾期预警列表
- 5.3.2 逾期天数计算
- 5.3.3 逾期等级分类
  - 5.3.3.1 严重逾期（CRITICAL）
  - 5.3.3.2 高度逾期（HIGH）
  - 5.3.3.3 中度逾期（MEDIUM）
  - 5.3.3.4 轻度逾期（LOW）
- 5.3.4 应收金额统计
- 5.3.5 预期收款日期展示

---

## 6. 交付管理模块

### 6.1 项目概览
- 6.1.1 项目总数统计
- 6.1.2 按客户分组统计
- 6.1.3 按状态分组统计
- 6.1.4 项目完成率计算
- 6.1.5 活跃项目列表

### 6.2 里程碑管理
- 6.2.1 里程碑状态概览
  - 6.2.1.1 待开始里程碑数量
  - 6.2.1.2 进行中里程碑数量
  - 6.2.1.3 已交付里程碑数量
  - 6.2.1.4 已验收里程碑数量
  - 6.2.1.5 被拒绝里程碑数量
- 6.2.2 逾期里程碑预警
- 6.2.3 即将到期里程碑提醒
- 6.2.4 里程碑时间线展示
- 6.2.5 里程碑交付物跟踪

### 6.3 资源利用率分析
- 6.3.1 按岗位统计资源利用率
- 6.3.2 月度资源分配趋势
- 6.3.3 工时分配统计
- 6.3.4 资源利用值计算
- 6.3.5 人力框架合同资源追踪

---

## 7. 销售管理模块

### 7.1 客户管理

#### 7.1.1 客户概览
- 7.1.1.1 活跃客户数统计
- 7.1.1.2 新增客户统计
- 7.1.1.3 总客户数统计
- 7.1.1.4 按行业分布统计

#### 7.1.2 客户360°视图
- 7.1.2.1 客户基本信息展示
- 7.1.2.2 合同历史记录
- 7.1.2.3 客户总价值计算
- 7.1.2.4 活跃合同数统计
- 7.1.2.5 首次合同日期
- 7.1.2.6 最后合同日期
- 7.1.2.7 客户生命周期分析

### 7.2 续约管理

#### 7.2.1 续约概览
- 7.2.1.1 本月即将过期合同
- 7.2.1.2 本季即将过期合同
- 7.2.1.3 续约率统计
- 7.2.1.4 续约总价值计算

#### 7.2.2 续约智能分析
- 7.2.2.1 续约概率预测
- 7.2.2.2 续约优先级分配（HIGH/MEDIUM/LOW）
- 7.2.2.3 续约风险识别
- 7.2.2.4 续约机会推荐

#### 7.2.3 续约看板
- 7.2.3.1 倒计时展示
- 7.2.3.2 优先级颜色标记
- 7.2.3.3 跟进状态记录

### 7.3 销售业绩分析
- 7.3.1 按销售人员统计业绩
- 7.3.2 新签合同统计
- 7.3.3 续约合同统计
- 7.3.4 月度业绩趋势
- 7.3.5 销售排名展示
- 7.3.6 按年度筛选业绩

---

## 8. 法务合规模块

### 8.1 合规性检查

#### 8.1.1 合同合规扫描
- 8.1.1.1 关键条款检查清单
- 8.1.1.2 条款存在性验证
- 8.1.1.3 风险条款识别
- 8.1.1.4 缺失条款提醒
- 8.1.1.5 合规评分计算（0-100分）
- 8.1.1.6 最后扫描时间记录

#### 8.1.2 合规概览
- 8.1.2.1 平均合规评分
- 8.1.2.2 按评分等级统计
- 8.1.2.3 低分合同列表
- 8.1.2.4 总扫描合同数
- 8.1.2.5 合规趋势分析

### 8.2 风险评估

#### 8.2.1 合同风险评分
- 8.2.1.1 总体风险评分
- 8.2.1.2 风险等级判定（CRITICAL/HIGH/MEDIUM/LOW）
- 8.2.1.3 风险因子分解
  - 8.2.1.3.1 定价合理性因子
  - 8.2.1.3.2 付款条件因子
  - 8.2.1.3.3 时间风险因子
  - 8.2.1.3.4 合规风险因子
  - 8.2.1.3.5 交付风险因子
  - 8.2.1.3.6 行业风险因子
- 8.2.1.4 各因子权重配置
- 8.2.1.5 各因子得分计算
- 8.2.1.6 因子描述说明

#### 8.2.2 风险概览
- 8.2.2.1 平均风险评分
- 8.2.2.2 按风险等级统计
- 8.2.2.3 高风险合同列表
- 8.2.2.4 风险趋势分析

#### 8.2.3 风险条款检测
- 8.2.3.1 识别高风险条款类型
- 8.2.3.2 风险等级标注
- 8.2.3.3 条款内容提取
- 8.2.3.4 修改建议生成

#### 8.2.4 风险预警
- 8.2.4.1 风险预警列表
- 8.2.4.2 预警类型分类
- 8.2.4.3 严重程度标记
- 8.2.4.4 关联合同信息
- 8.2.4.5 预警产生时间
- 8.2.4.6 支持预警数量限制

### 8.3 履约证据链
- 8.3.1 证据事件记录
  - 8.3.1.1 事件类型分类
  - 8.3.1.2 事件日期记录
  - 8.3.1.3 事件描述
  - 8.3.1.4 证据文件附件
- 8.3.2 证据完整性评分
- 8.3.3 里程碑覆盖情况
- 8.3.4 证据时间线展示

---

## 9. 市场知识库模块

### 9.1 合同搜索

#### 9.1.1 关键词搜索
- 9.1.1.1 全文搜索
- 9.1.1.2 搜索结果高亮
- 9.1.1.3 摘要展示

#### 9.1.2 高级筛选
- 9.1.2.1 按行业筛选
- 9.1.2.2 按合同类型筛选
- 9.1.2.3 按标签筛选（支持多选）
- 9.1.2.4 按金额范围筛选
- 9.1.2.5 组合条件搜索

#### 9.1.3 搜索结果展示
- 9.1.3.1 分页展示
- 9.1.3.2 相关性排序
- 9.1.3.3 高亮关键词
- 9.1.3.4 快速预览

### 9.2 标签统计
- 9.2.1 标签云可视化
- 9.2.2 按分类展示热门标签
- 9.2.3 每个标签的合同数统计
- 9.2.4 每个标签的总价值统计
- 9.2.5 标签热度排序

### 9.3 案例库管理
- 9.3.1 案例库概览
- 9.3.2 按行业分布统计
- 9.3.3 特色案例展示
- 9.3.4 案例数量统计
- 9.3.5 案例卡片展示

---

## 10. 管理驾驶舱模块

### 10.1 公司健康度评估
- 10.1.1 综合健康度评分
- 10.1.2 多维度评分
  - 10.1.2.1 交付健康度
  - 10.1.2.2 财务健康度
  - 10.1.2.3 合规健康度
  - 10.1.2.4 风险健康度
  - 10.1.2.5 销售健康度
- 10.1.3 预警信息列表
- 10.1.4 月度趋势分析

### 10.2 风险热力图
- 10.2.1 多维度分组
  - 10.2.1.1 按部门分组
  - 10.2.1.2 按客户分组
  - 10.2.1.3 按合同类型分组
- 10.2.2 矩阵展示
  - 10.2.2.1 风险等级×子类别
  - 10.2.2.2 合同数量展示
  - 10.2.2.3 总价值展示
  - 10.2.2.4 平均风险值展示
- 10.2.3 热色编码（绿→黄→红）

### 10.3 核心KPI指标
- 10.3.1 KPI分类展示
  - 10.3.1.1 合同类别KPI
  - 10.3.1.2 财务表现KPI
  - 10.3.1.3 交付情况KPI
  - 10.3.1.4 风险状态KPI
- 10.3.2 KPI指标详情
  - 10.3.2.1 目标值设定
  - 10.3.2.2 实现值记录
  - 10.3.2.3 完成率计算
  - 10.3.2.4 趋势判断（上升/下降/持平）
- 10.3.3 按周期筛选KPI

---

## 11. 风险引擎模块

### 11.1 智能风险评估
- 11.1.1 合同风险全面分析
- 11.1.2 风险因子智能识别
- 11.1.3 风险评分自动计算
- 11.1.4 风险等级自动判定
- 11.1.5 改进建议生成

### 11.2 风险条款检测
- 11.2.1 高风险条款自动识别
- 11.2.2 条款类型分类
- 11.2.3 风险程度评级
- 11.2.4 条款内容提取
- 11.2.5 修改建议提供

### 11.3 风险预警系统
- 11.3.1 实时风险预警
- 11.3.2 预警类型分类
- 11.3.3 严重程度分级
- 11.3.4 预警列表展示
- 11.3.5 预警关联合同

---

## 12. 向量搜索模块

### 12.1 语义搜索
- 12.1.1 基于语义的合同搜索
- 12.1.2 相似度评分计算
- 12.1.3 关键段落高亮
- 12.1.4 语义理解而非关键词匹配
- 12.1.5 搜索结果数量限制

### 12.2 相似合同推荐
- 12.2.1 查找相似合同
- 12.2.2 相似度排序
- 12.2.3 匹配原因说明
- 12.2.4 推荐数量限制
- 12.2.5 相似合同详情链接

---

## 13. 数据分析模块

### 13.1 多维度分析
- 13.1.1 按维度聚合分析
  - 13.1.1.1 按合同类型分析
  - 13.1.1.2 按客户分析
  - 13.1.1.3 按部门分析
  - 13.1.1.4 按行业分析
- 13.1.2 分组方式选择
- 13.1.3 指标计算
  - 13.1.3.1 合同数量统计
  - 13.1.3.2 总价值计算
  - 13.1.3.3 平均价值计算

### 13.2 趋势分析
- 13.2.1 历史数据趋势展示（默认12个月）
- 13.2.2 增长率计算
- 13.2.3 趋势方向判断
- 13.2.4 自定义时间周期
- 13.2.5 多指标趋势对比

### 13.3 预测分析
- 13.3.1 未来指标预测
- 13.3.2 当前值展示
- 13.3.3 预测值计算
- 13.3.4 预测信心度评估
- 13.3.5 趋势预判

---

## 14. 审计日志模块

### 14.1 操作日志记录
- 14.1.1 用户操作自动记录
- 14.1.2 操作类型分类
  - 14.1.2.1 创建操作（CREATE_*）
  - 14.1.2.2 更新操作（UPDATE_*）
  - 14.1.2.3 删除操作（DELETE_*）
  - 14.1.2.4 登录操作（LOGIN）
  - 14.1.2.5 其他操作
- 14.1.3 实体类型记录
- 14.1.4 实体ID和名称记录
- 14.1.5 变更前后数据记录（JSON格式）
- 14.1.6 操作人信息记录
- 14.1.7 IP地址记录
- 14.1.8 User-Agent记录
- 14.1.9 操作时间戳记录

### 14.2 审计日志查询（仅ADMIN）
- 14.2.1 分页查询审计日志
- 14.2.2 按操作类型筛选
- 14.2.3 按实体类型筛选
- 14.2.4 按操作人筛选
- 14.2.5 按日期范围筛选
- 14.2.6 查看变更详情
- 14.2.7 对比变更前后值

### 14.3 审计元数据
- 14.3.1 获取所有操作类型列表
- 14.3.2 获取所有实体类型列表
- 14.3.3 审计统计分析

---

## 15. 系统管理与配置

### 15.1 系统健康检查
- 15.1.1 API健康状态检查
- 15.1.2 数据库连接检查
- 15.1.3 存储服务检查
- 15.1.4 系统状态报告

### 15.2 文件管理
- 15.2.1 MinIO对象存储集成
- 15.2.2 文件上传管理
- 15.2.3 文件下载管理
- 15.2.4 文件删除管理
- 15.2.5 预签名URL生成
- 15.2.6 文件存在性验证

### 15.3 数据库管理
- 15.3.1 Prisma ORM集成
- 15.3.2 数据库迁移管理
- 15.3.3 数据库种子数据
- 15.3.4 事务管理

### 15.4 GraphQL配置
- 15.4.1 Schema自动生成
- 15.4.2 自定义标量类型
  - 15.4.2.1 DateTime标量
  - 15.4.2.2 Decimal标量
  - 15.4.2.3 JSON标量
- 15.4.3 Apollo Server集成
- 15.4.4 GraphQL Playground

### 15.5 前端类型生成
- 15.5.1 GraphQL代码生成
- 15.5.2 TypeScript类型生成
- 15.5.3 React hooks自动生成
- 15.5.4 共享类型库（@i-clms/shared）

---

## 16. 客户管理模块

### 16.1 客户信息管理
- 16.1.1 客户基本信息
  - 16.1.1.1 客户全称
  - 16.1.1.2 客户简称
  - 16.1.1.3 统一社会信用代码
  - 16.1.1.4 所属行业
  - 16.1.1.5 客户地址
- 16.1.2 客户联系信息
  - 16.1.2.1 联系人姓名
  - 16.1.2.2 联系电话
  - 16.1.2.3 联系邮箱

### 16.2 客户关系跟踪
- 16.2.1 客户合同历史
- 16.2.2 客户交易总额
- 16.2.3 客户活跃状态
- 16.2.4 客户生命周期价值

---

## 17. 前端用户界面

### 17.1 页面导航
- 17.1.1 顶部导航栏
- 17.1.2 用户下拉菜单
- 17.1.3 面包屑导航
- 17.1.4 侧边栏导航（可选）

### 17.2 数据可视化组件
- 17.2.1 柱状图组件
- 17.2.2 折线图组件
- 17.2.3 饼图组件
- 17.2.4 仪表盘组件
- 17.2.5 热力图组件
- 17.2.6 时间线组件
- 17.2.7 进度条组件

### 17.3 表单组件
- 17.3.1 文本输入框
- 17.3.2 下拉选择框
- 17.3.3 日期选择器
- 17.3.4 文件上传器
- 17.3.5 富文本编辑器
- 17.3.6 表单验证

### 17.4 数据展示组件
- 17.4.1 数据表格（分页、排序、筛选）
- 17.4.2 卡片展示
- 17.4.3 列表展示
- 17.4.4 详情页面
- 17.4.5 标签显示
- 17.4.6 状态徽章

### 17.5 交互组件
- 17.5.1 模态对话框
- 17.5.2 确认对话框
- 17.5.3 消息提示
- 17.5.4 加载指示器
- 17.5.5 工具提示
- 17.5.6 下拉菜单

---

## 18. API接口统计

### 18.1 GraphQL Query操作
- 总计：50+ Query操作
- 涵盖所有模块的数据查询

### 18.2 GraphQL Mutation操作
- 总计：40+ Mutation操作
- 涵盖所有模块的数据变更

### 18.3 数据模型
- 总计：15个主要数据实体
- 完整的关系映射

---

## 19. 合同信息完整提取能力

### 19.1 提取字段覆盖范围

**系统支持提取和管理的合同信息维度：**

| 维度 | 字段数 | 关键能力 |
|------|--------|----------|
| 合同识别信息 | 6+ | 合同号、标题、类型、子类型、版本、语言 |
| 签约方信息 | 40+ | 完整企业信息、联系人、授权签署人、附加方 |
| 时间信息 | 10+ | 执行/生效/开始/终止日期、期限、续约条款 |
| 工作范围 | 20+ | SOW描述、交付物规格、质量标准、排除项 |
| 服务级别 | 25+ | SLA指标、目标、罚则、响应时间、可用性 |
| 商业条款 | 50+ | 定价结构、付款计划、逾期利息、质保金 |
| 知识产权 | 20+ | 背景/前景IP、许可授予、保密信息 |
| 担保和责任 | 30+ | 担保类型、责任上限、赔偿、保险 |
| 终止和争议 | 25+ | 终止条款、治愈期、争议解决、管辖法律 |
| 特殊条款 | 15+ | 数据保护、出口管制、反腐败、业务连续性 |
| 绩效管理 | 15+ | KPI定义、测量方式、评审机制 |
| 人员和变更 | 20+ | 关键人员、资格、变更控制、培训 |
| 文档元数据 | 15+ | 附件、签名、条款位置、模糊条款识别 |

**总计：300+个细分字段，23大类信息维度**

### 19.2 提取方法智能分级

```
程序解析（Regex）
├─ 快速识别常见模式
├─ 置信度评分
└─ 触发LLM决策
    ↓
LLM验证模式（得分50-69）
├─ 验证程序提取结果
├─ 补充缺失字段
└─ 修正错误识别
    ↓
LLM完整提取（得分<50）
├─ 语义分段处理
├─ 深度理解条款
├─ 识别复杂关系
└─ 提取所有300+字段
```

### 19.3 提取质量保证

- **置信度评分**：每个字段独立评分（0-100）
- **完整性检查**：基于合同类型的必填字段验证
- **一致性验证**：交叉验证相关字段的逻辑一致性
- **位置引用**：记录字段在原文的页码和段落位置
- **模糊识别**：标记需要人工确认的模糊条款

### 19.4 支持的合同类型完整性

| 合同类型 | 特有字段数 | 通用字段数 | 总字段数 |
|---------|-----------|-----------|----------|
| 人力外包 | 50+ | 250+ | 300+ |
| 项目外包 | 60+ | 240+ | 300+ |
| 软硬件买卖 | 55+ | 245+ | 300+ |
| 混合型 | 80+ | 220+ | 300+ |

---

## 系统特色亮点

### 1. 混合智能解析（业界领先）
- **三层策略**：程序解析 + LLM验证 + LLM完整提取
- **300+字段提取**：23大类信息维度，全面覆盖合同要素
- **智能决策**：自动评分，动态选择最优策略，平衡成本和质量
- **双模型支持**：本地免费模型（Ollama）和云端付费模型（OpenAI）
- **位置追溯**：记录每个字段的原文位置（页码、段落）
- **质量保证**：字段级置信度评分、完整性检查、一致性验证

### 2. 多态合同设计
- 单一合同表支持三种业务模式
- 灵活扩展支持未来新类型
- 类型特定详情表通过1:1关系关联

### 3. 全流程审计
- 所有关键操作自动记录
- 完整的变更历史追踪
- 支持多维度审计查询

### 4. 多维度分析
- 按类型、客户、部门、行业等多维分析
- 时间序列趋势分析
- 预测分析能力

### 5. 语义搜索
- 基于向量的语义理解
- 相似合同智能推荐
- 不仅依赖关键词匹配

### 6. 实时预警
- 逾期应收预警
- 风险条款检测
- 里程碑延期预警
- 续约机会提醒

### 7. 细粒度权限
- 三层角色体系
- 按角色限制功能访问
- 特权操作审计追踪

---

## 核心价值主张

**系统核心价值**：一份合同签署，全流程数据就绪，全部门价值赋能

**服务部门**：财务、交付、业务、市场、法务、管理层

**技术栈**：NestJS + React + GraphQL + Prisma + PostgreSQL + AI

**业务目标**：通过智能化手段实现合同全生命周期管理，为企业各部门提供数据驱动的决策支持

---

---

## 系统规模统计

| 指标类别 | 数量 | 说明 |
|---------|------|------|
| **架构规模** |
| 后端功能模块 | 27个 | 涵盖认证、合同、解析、财务、交付、销售、法务等 |
| 前端页面 | 14个 | 完整的管理界面和仪表盘 |
| GraphQL操作 | 90+个 | Query和Mutation总计 |
| 数据模型 | 15个 | 主要实体及关系 |
| **功能覆盖** |
| 一级功能模块 | 19个 | 从用户管理到合同信息提取 |
| 二级功能点 | 150+ | 详细功能分类 |
| 三级功能点 | 500+ | 细粒度功能说明 |
| **合同信息提取** |
| 提取字段总数 | 300+ | 全面覆盖合同所有要素 |
| 信息维度 | 23类 | 从识别信息到实施计划 |
| 支持合同类型 | 4种 | 人力外包、项目外包、软硬件买卖、混合型 |
| 提取策略 | 3层 | 程序解析→LLM验证→LLM完整提取 |
| **质量保证** |
| 置信度评分维度 | 字段级 | 每个字段独立评分 |
| 完整性检查项 | 100+ | 基于合同类型的必填字段 |
| 审计日志操作类型 | 50+ | 覆盖所有关键操作 |

---

**文档版本**: v2.0（增强版-包含完整字段提取能力）
**文档生成时间**: 2026-01-19
**最后更新**: 结合《合同信息结构.json》完善了300+字段的提取能力描述
