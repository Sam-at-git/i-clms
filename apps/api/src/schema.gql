# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

input AcceptMilestoneInput {
  id: ID!
  notes: String
}

type AdditionalParty {
  info: PartyInfo!
  role: String!
}

"""告警状态"""
enum AlertStatus {
  ACTIVE
  DISMISSED
  ESCALATED
  RESOLVED
}

type AnalyticsDimension {
  dimension: String!
  metrics: AnalyticsMetrics!
  value: String!
}

type AnalyticsMetrics {
  avgValue: Float!
  count: Int!
  totalValue: Float!
}

type AsyncParseStartResponse {
  message: String!
  sessionId: String!
}

type AuditLog {
  action: String!
  createdAt: DateTime!
  entityId: String!
  entityName: String
  entityType: String!
  id: ID!
  ipAddress: String
  newValue: JSON
  oldValue: JSON
  operator: AuditOperator!
}

type AuditLogConnection {
  items: [AuditLog!]!
  page: Int!
  pageSize: Int!
  total: Int!
}

input AuditLogFilterInput {
  action: String
  endDate: DateTime
  entityType: String
  operatorId: String
  startDate: DateTime
}

type AuditOperator {
  email: String!
  id: ID!
  name: String!
}

type AuthResponse {
  accessToken: String!
  user: User!
}

type AuthorizedSignatory {
  name: String
  signatureDate: String
  title: String
}

type BasicExtractedFieldsType {
  extractionConfidence: Float!
  identification: ContractIdentificationType!
  parties: PartiesInfoType!
  term: ContractTermType!
}

type BasicInfo {
  contractName: String
  contractNo: String
  customerName: String
  ourEntity: String
  status: String
}

type BatchCorrectionProgressDto {
  completedFields: Int!
  currentField: String
  error: String
  results: [BatchCorrectionResultItem!]!
  sessionId: String!
  status: String!
  totalFields: Int!
}

type BatchCorrectionResultItem {
  confidence: Float!
  evidence: String!
  fieldDisplayName: String!
  fieldName: String!
  originalValue: String
  reasoning: String
  shouldChange: Boolean!
  suggestedValue: String
}

type BatchVectorizationError {
  """Contract ID"""
  contractId: String!

  """Error message"""
  error: String!
}

type BatchVectorizationResult {
  """List of errors"""
  errors: [BatchVectorizationError!]

  """Number of contracts failed"""
  failed: Int!

  """Number of contracts processed"""
  processed: Int!

  """Whether all vectorizations succeeded"""
  success: Boolean!
}

"""L2 向量嵌入缓存统计"""
type CacheLevel2Stats {
  """嵌入缓存数量"""
  count: Int!
}

"""L3 LLM结果缓存统计"""
type CacheLevel3Stats {
  """LLM缓存数量"""
  count: Int!

  """过期缓存数量"""
  expiredCount: Int!
}

"""L1 内存缓存统计"""
type CacheLevelStats {
  """命中率 (0-1)"""
  hitRate: Float!

  """命中次数"""
  hits: Int!

  """未命中次数"""
  misses: Int!

  """缓存条目数量"""
  size: Int!
}

"""多级缓存统计信息"""
type CacheStats {
  """L1 内存缓存统计"""
  level1: CacheLevelStats!

  """L2 向量嵌入缓存统计"""
  level2: CacheLevel2Stats!

  """L3 LLM结果缓存统计"""
  level3: CacheLevel3Stats!
}

type CanVectorizeResult {
  """Whether contract can be vectorized"""
  canVectorize: Boolean!

  """Reason if cannot vectorize"""
  reason: String
}

type CaseOverview {
  byIndustry: [IndustryCases!]!
  featured: [CaseStudy!]!
  totalCases: Int!
}

type CaseStudy {
  amount: Float!
  contractNo: String!
  customerName: String!
  description: String
  highlights: [String!]!
  id: String!
  industry: String
  name: String!
  signedAt: DateTime
  tags: [String!]!
  type: ContractType!
}

"""案例状态"""
enum CaseStudyStatus {
  APPROVED
  ARCHIVED
  DRAFT
  GENERATED
  PUBLISHED
}

type CashFlowForecast {
  expectedIncome: Float!
  month: String!
  pendingAmount: Float!
  receivedAmount: Float!
}

type CategoryScores {
  basic: Float!
  financial: Float!
  other: Float!
  temporal: Float!
}

type CategoryTags {
  category: String!
  tags: [TagStats!]!
}

input ChangePasswordInput {
  currentPassword: String!
  newPassword: String!
}

type ChangePasswordResult {
  message: String
  success: Boolean!
}

type ChunkProgressInfo {
  chunkId: String!
  chunkIndex: Int!
  endTime: Int
  error: String
  purpose: String!
  startTime: Int
  status: ChunkStatus!
  totalChunks: Int!
}

"""分块处理状态"""
enum ChunkStatus {
  COMPLETED
  FAILED
  PENDING
  PROCESSING
}

type ClassificationResult {
  confidence: Float!
  contractType: String!
  industry: String
  scale: String!
}

type ClauseCheck {
  clauseName: String!
  clauseType: String!
  exists: Boolean!
  riskLevel: RiskLevel
  suggestion: String
}

type CompanyHealth {
  alerts: [HealthAlert!]!
  dimensions: [HealthDimension!]!
  overallScore: Float!
  trend: [MonthlyScore!]!
}

type CompletenessScore {
  categoryScores: CategoryScores!
  details: [FieldScoreDetail!]!
  maxScore: Float!
  percentage: Float!
  strategy: ParseStrategy!
  totalScore: Float!
}

type ComplianceOverview {
  avgScore: Float!
  byLevel: [ComplianceStats!]!
  lowScoreContracts: [ContractCompliance!]!
  totalScanned: Float!
}

type ComplianceStats {
  count: Float!
  level: String!
  percentage: Float!
}

input ConcurrentParseInput {
  """需要提取的字段列表"""
  fields: [String!]!

  """最大并发数（默认3）"""
  maxConcurrent: Int

  """合同文本内容"""
  text: String!
}

type ContactPerson {
  email: String
  name: String
  phone: String
  title: String
}

type Contract {
  amountWithTax: String!
  amountWithoutTax: String

  """分块数量"""
  chunkCount: Int
  contractNo: String!
  copies: Int
  createdAt: DateTime!
  currency: String!
  customer: Customer!
  department: Department!
  duration: String
  effectiveAt: DateTime
  expiresAt: DateTime
  fileType: String
  fileUrl: String
  id: ID!
  industry: String

  """是否已向量化"""
  isVectorized: Boolean!
  name: String!
  needsManualReview: Boolean!
  ourEntity: String!
  parentContract: Contract
  parseConfidence: Float
  parseStatus: ParseStatus!
  parsedAt: DateTime
  paymentMethod: String
  paymentTerms: String
  productSalesDetail: ProductSalesDetail
  projectOutsourcingDetail: ProjectOutsourcingDetail
  salesPerson: String
  signLocation: String
  signedAt: DateTime
  staffAugmentationDetail: StaffAugmentationDetail
  status: ContractStatus!
  supplements: [Contract!]!
  tags: [Tag!]!
  taxAmount: String
  taxRate: String
  type: ContractType!
  updatedAt: DateTime!
  uploadedBy: User!

  """向量化方式：AUTO/MANUAL"""
  vectorizationMethod: String

  """向量化时间"""
  vectorizedAt: DateTime
}

"""合同段落信息"""
type ContractChunk {
  """段落类型"""
  chunkType: String!

  """段落内容"""
  content: String!

  """段落索引"""
  index: Int!
}

type ContractCompliance {
  clauses: [ClauseCheck!]!
  contractId: String!
  contractName: String!
  contractNo: String!
  lastScannedAt: DateTime
  missingClauses: [String!]!
  overallScore: Float!
  riskyClauses: [String!]!
}

type ContractConnection {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  nodes: [Contract!]!
  totalCount: Int!
}

type ContractDataProtection {
  """AI提取的置信度 (0-1)"""
  confidence: Float

  """合同ID"""
  contractId: String!

  """创建时间"""
  createdAt: DateTime!

  """跨境传输要求"""
  crossBorderTransfer: String

  """数据保留期限"""
  dataRetention: String

  """主键ID"""
  id: Int!

  """是否涉及个人数据"""
  involvesPersonalData: Boolean!

  """原始文本引用"""
  originalText: String

  """个人数据类型描述"""
  personalDataType: String

  """数据处理地点限制"""
  processingLocation: String

  """风险等级"""
  riskLevel: DataProtectionRisk!

  """安全措施要求"""
  securityMeasures: String

  """更新时间"""
  updatedAt: DateTime!
}

type ContractExtractedData {
  basicInfo: BasicInfo!
  contractType: ContractType!
  financialInfo: FinancialInfo
  metadata: ExtractionMetadata
  otherInfo: OtherInfo
  timeInfo: TimeInfo
  typeSpecificDetails: JSON
}

input ContractFilterInput {
  customerId: String
  departmentId: String
  expiresAfter: DateTime
  expiresBefore: DateTime
  maxAmount: Float
  minAmount: Float
  needsManualReview: Boolean
  parseStatuses: [ParseStatus!]
  search: String
  signedAfter: DateTime
  signedBefore: DateTime
  statuses: [ContractStatus!]
  types: [ContractType!]
}

type ContractIdentificationType {
  contractNumber: String
  contractTitle: String
  contractType: String
  effectiveLanguage: String
  subType: String
  versionNumber: String
}

type ContractLegalClause {
  """违约责任描述"""
  breachLiability: String

  """条款类型"""
  clauseType: LegalClauseType!

  """赔偿计算方式"""
  compensationMethod: String

  """AI提取的置信度 (0-1)"""
  confidence: Float

  """合同ID"""
  contractId: String!

  """创建时间"""
  createdAt: DateTime!

  """争议解决地点"""
  disputeLocation: String

  """争议解决方式（ARBITRATION/LITIGATION/NEGOTIATION）"""
  disputeResolution: String

  """除外责任类型描述"""
  exclusions: String

  """担保金额"""
  guaranteeAmount: String

  """担保期限描述"""
  guaranteePeriod: String

  """担保类型（GENERAL/JOINT_AND_SEVERAL）"""
  guaranteeType: String

  """担保方（FIRST_PARTY/SECOND_PARTY/THIRD_PARTY）"""
  guarantor: String

  """主键ID"""
  id: Int!

  """责任上限金额"""
  liabilityLimit: String

  """许可费用描述"""
  licenseFee: String

  """许可类型（独占/非独占/普通）"""
  licenseType: String

  """原始文本引用（用于溯源）"""
  originalText: String

  """便利终止通知期（如"30天"、"60天"）"""
  terminationNotice: String

  """更新时间"""
  updatedAt: DateTime!
}

"""Field to order contracts by"""
enum ContractOrderField {
  AMOUNT
  CONTRACT_NO
  CREATED_AT
  EXPIRES_AT
  NAME
  SIGNED_AT
  UPDATED_AT
}

input ContractOrderInput {
  direction: SortOrder! = DESC
  field: ContractOrderField! = CREATED_AT
}

type ContractProfile {
  contractId: String!
  features: [FeatureScore!]!
  keywords: [String!]!
  tags: [String!]!
}

type ContractRiskScore {
  contractId: String!
  contractName: String!
  contractNo: String!
  customerName: String!
  factors: [RiskFactor!]!
  overallScore: Float!
  riskLevel: RiskLevel!
  trend: String
}

input ContractSearchInput {
  industries: [String!]
  keyword: String
  limit: Int = 20
  maxAmount: Float
  minAmount: Float
  offset: Int = 0
  tags: [String!]
  types: [ContractType!]
}

type ContractSearchResult {
  amount: Float!
  contractNo: String!
  customerName: String!
  highlight: String
  id: String!
  industry: String
  name: String!
  signedAt: DateTime
  tags: [String!]!
  type: ContractType!
}

"""Status of contract"""
enum ContractStatus {
  """已生效"""
  ACTIVE

  """已完结"""
  COMPLETED

  """草拟"""
  DRAFT

  """执行中"""
  EXECUTING

  """已过期"""
  EXPIRED

  """审批中"""
  PENDING_APPROVAL

  """已终止"""
  TERMINATED
}

type ContractSummary {
  amount: Float!
  contractNo: String!
  expiresAt: DateTime
  id: String!
  name: String!
  signedAt: DateTime
  status: ContractStatus!
  type: ContractType!
}

type ContractTermType {
  commencementDate: String
  duration: Duration
  effectiveDate: String
  executionDate: String
  renewal: RenewalTerms
  terminationDate: String
}

"""Type of contract"""
enum ContractType {
  """产品购销合同"""
  PRODUCT_SALES

  """项目外包合同"""
  PROJECT_OUTSOURCING

  """人力框架合同"""
  STAFF_AUGMENTATION
}

type ContractTypeDetectionResult {
  """置信度 (0-1)"""
  confidence: Int!

  """合同类型描述"""
  description: String

  """检测到的合同类型"""
  detectedType: String

  """合同类型中文名称"""
  displayName: String

  """判断依据说明"""
  reasoning: String!
}

type CoreKPIs {
  categories: [KPICategory!]!
  highlights: [String!]!
  period: String!
}

type CorrectionSuggestionDto {
  confidence: Float!
  evidence: String!
  fieldDisplayName: String!
  fieldName: String!
  originalValue: String
  reasoning: String
  shouldChange: Boolean!
  suggestedValue: String
}

input CreateBulkNotificationsInput {
  email: Boolean
  expiresAt: DateTime
  inApp: Boolean
  link: String
  message: String!
  metadata: JSONObject
  priority: NotificationPriority
  sms: Boolean
  title: String!
  type: NotificationType!
  userIds: [String!]!
}

input CreateCaseStudyInput {
  challenges: String
  contractId: String!
  desensitizeConfig: JSONObject
  displayAmount: String
  displayCustomerName: String
  displayIndustry: String
  fullMarkdown: String!
  isDesensitized: Boolean = true
  results: String
  solution: String
  subtitle: String
  summary: String!
  tags: [String!] = []
  teamSize: String
  techStack: String
  testimonial: String
  timeline: String
  title: String!
}

input CreateContactInput {
  email: String
  isPrimary: Boolean = false
  name: String!
  phone: String
  title: String
}

input CreateContractInput {
  amountWithTax: String!
  amountWithoutTax: String
  contractNo: String!

  """合同份数"""
  copies: Float
  currency: String = "CNY"
  customerId: String

  """客户名称，当customerId不提供时用于创建新客户"""
  customerName: String
  departmentId: String!
  duration: String
  effectiveAt: DateTime
  expiresAt: DateTime
  fileType: String
  fileUrl: String
  industry: String

  """Docling生成的markdown文本，用于向量化"""
  markdownText: String
  name: String!
  ourEntity: String!
  parentContractId: String
  paymentMethod: String
  paymentTerms: String

  """产品购销合同详情（产品清单等）"""
  productSalesDetail: ProductSalesDetailInput

  """项目外包合同详情（里程碑等）"""
  projectOutsourcingDetail: ProjectOutsourcingDetailInput
  salesPerson: String

  """签订地点"""
  signLocation: String
  signedAt: DateTime

  """人力框架合同详情（费率等）"""
  staffAugmentationDetail: StaffAugmentationDetailInput
  status: ContractStatus = DRAFT
  taxAmount: String
  taxRate: String
  type: ContractType!
  uploadedById: String!
}

input CreateCustomerInput {
  address: String
  contacts: [CreateContactInput!]
  creditCode: String
  fullName: String!
  industry: String
  shortName: String
}

input CreateDataProtectionInput {
  """AI提取的置信度 (0-1)"""
  confidence: Float

  """合同ID"""
  contractId: String!

  """跨境传输要求"""
  crossBorderTransfer: String

  """数据保留期限"""
  dataRetention: String

  """是否涉及个人数据"""
  involvesPersonalData: Boolean!

  """原始文本引用"""
  originalText: String

  """个人数据类型描述"""
  personalDataType: String

  """数据处理地点限制"""
  processingLocation: String

  """风险等级"""
  riskLevel: DataProtectionRisk!

  """安全措施要求"""
  securityMeasures: String
}

input CreateDepartmentInput {
  code: String!
  name: String!
}

input CreateFinancialTransactionInput {
  amount: Int!
  category: String!
  contractId: String!
  currency: String
  description: String
  dueDate: String
  metadata: String
  occurredAt: String
  status: TransactionStatus
  type: TransactionType!
}

input CreateLegalClauseInput {
  """违约责任描述"""
  breachLiability: String

  """条款类型"""
  clauseType: LegalClauseType!

  """赔偿计算方式"""
  compensationMethod: String

  """AI提取的置信度 (0-1)"""
  confidence: Float

  """合同ID"""
  contractId: String!

  """争议解决地点"""
  disputeLocation: String

  """争议解决方式"""
  disputeResolution: String

  """除外责任类型描述"""
  exclusions: String

  """担保金额"""
  guaranteeAmount: Float

  """担保期限描述"""
  guaranteePeriod: String

  """担保类型（GENERAL/JOINT_AND_SEVERAL）"""
  guaranteeType: String

  """担保方（FIRST_PARTY/SECOND_PARTY/THIRD_PARTY）"""
  guarantor: String

  """责任上限金额"""
  liabilityLimit: Float

  """许可费用描述"""
  licenseFee: String

  """许可类型（独占/非独占/普通）"""
  licenseType: String

  """原始文本引用"""
  originalText: String

  """便利终止通知期"""
  terminationNotice: String
}

input CreateLegalReviewInput {
  contractId: String!
  findings: String
  recommendations: String
  reviewerId: String!
  riskLevel: LegalRiskLevel!
  status: ReviewStatus
}

input CreateNotificationInput {
  email: Boolean
  expiresAt: DateTime
  inApp: Boolean
  link: String
  message: String!
  metadata: JSONObject
  priority: NotificationPriority
  sms: Boolean
  title: String!
  type: NotificationType!
  userId: String!
}

input CreateRiskAlertInput {
  contractId: String!
  description: String!
  severity: RiskSeverity!
  title: String!
  type: RiskAlertType!
}

input CreateTagInput {
  category: String!
  color: String = "#3b82f6"
  name: String!
}

input CreateUserInput {
  departmentId: String!
  email: String!
  name: String!
  role: UserRole!
}

type Customer {
  address: String
  contactEmail: String
  contactPerson: String
  contactPhone: String
  contacts: [CustomerContact!]!
  contracts: [Contract!]
  createdAt: DateTime!
  creditCode: String
  id: ID!
  industry: String
  name: String!
  shortName: String
  status: CustomerStatus!
  updatedAt: DateTime!
}

type Customer360 {
  activeContracts: Int!
  contractHistory: [ContractSummary!]!
  customerId: String!
  customerName: String!
  firstContractDate: DateTime
  industry: String
  lastContractDate: DateTime
  totalContracts: Int!
  totalValue: Float!
}

type CustomerContact {
  createdAt: DateTime!
  customerId: String!
  email: String
  id: ID!
  isPrimary: Boolean!
  name: String!
  phone: String
  title: String
  updatedAt: DateTime!
}

input CustomerFilterInput {
  industry: String
  search: String
  skip: Int = 0
  status: CustomerStatus
  take: Int = 20
}

type CustomerOverview {
  activeCustomers: Int!
  byIndustry: [IndustryCount!]!
  newCustomersThisYear: Int!
  topCustomers: [Customer360!]!
  totalCustomers: Int!
}

type CustomerProjects {
  activeCount: Int!
  customerId: String!
  customerName: String!
  projectCount: Int!
}

type CustomerRevenue {
  amount: Float!
  contractCount: Int!
  customerId: String!
  customerName: String!
}

type CustomerStats {
  activeContracts: Int!
  averageContractValue: Float!
  firstContractDate: DateTime
  isActive: Boolean!
  lastContractDate: DateTime
  lifetimeValueScore: Float!
  totalContracts: Int!
  totalValue: Float!
}

"""Customer status"""
enum CustomerStatus {
  ACTIVE
  ARCHIVED
  INACTIVE
}

type DataProtectionExtractionResult {
  """整体置信度 (0-1)"""
  confidence: Float!

  """提取的数据保护条款"""
  dataProtection: ContractDataProtection

  """是否涉及个人数据"""
  involvesPersonalData: Boolean!

  """使用的LLM模型"""
  llmModel: String

  """使用的LLM提供商"""
  llmProvider: String

  """处理时间（毫秒）"""
  processingTimeMs: Int!

  """风险等级"""
  riskLevel: DataProtectionRisk!
}

"""数据保护风险等级"""
enum DataProtectionRisk {
  HIGH
  LOW
  MEDIUM
  NONE
}

type DataProtectionRiskCount {
  """数量"""
  count: Int!

  """风险等级"""
  level: DataProtectionRisk!
}

type DataProtectionStats {
  """平均置信度"""
  avgConfidence: Float!

  """按风险等级统计"""
  byRiskLevel: [DataProtectionRiskCount!]!

  """涉及个人数据的合同数"""
  involvingPersonalData: Int!

  """总记录数"""
  total: Int!
}

"""DateTime custom scalar type"""
scalar DateTime

"""Decimal custom scalar type"""
scalar Decimal

type DeleteResult {
  message: String
  success: Boolean!
}

type Department {
  code: String!
  createdAt: DateTime!
  id: ID!
  isActive: Boolean!
  name: String!
  updatedAt: DateTime!
}

input DoclingConvertOptions {
  ocr: Boolean
  withImages: Boolean
  withTables: Boolean
}

type DoclingConvertResult {
  error: String

  """结果是否来自缓存"""
  fromCache: Boolean
  images: [DoclingImage!]!
  markdown: String!
  pages: Int!
  success: Boolean!
  tables: [DoclingTable!]!
}

type DoclingExtractResult {
  error: String

  """Extracted fields as JSON string"""
  fields: String!
  success: Boolean!
}

type DoclingImage {
  height: Int!
  page: Int!
  width: Int!
}

type DoclingTable {
  cols: Int!
  markdown: String!
  rows: Int!
}

type DuplicateCheckResult {
  existingContract: Contract
  isDuplicate: Boolean!
  message: String
}

type Duration {
  unit: String!
  value: Int!
}

type EmbeddingConfig {
  apiKey: String
  baseUrl: String
  dimensions: Int!
  model: String!
  provider: String!
}

type EmbeddingModelInfo {
  available: Boolean!
  dimensions: Int!
  model: String!
  provider: EmbeddingProvider!
}

"""Embedding model provider"""
enum EmbeddingProvider {
  HUGGINGFACE
  OLLAMA
  OPENAI
}

type EvaluateResultDto {
  reasoning: String
  suspiciousFields: [String!]!
}

type Evidence {
  createdAt: DateTime!
  description: String!
  eventDate: DateTime!
  eventType: String!
  fileUrl: String
  id: String!
}

type EvidenceChain {
  completenessScore: Float!
  contractId: String!
  contractName: String!
  contractNo: String!
  customerName: String!
  evidences: [Evidence!]!
  milestonesCovered: Int!
  totalMilestones: Int!
}

"""导出文件格式"""
enum ExportFormat {
  CSV
  EXCEL
  PDF
}

type ExportResult {
  downloadUrl: String!
  fileName: String!
  fileSize: Int!
  format: String!
  generatedAt: DateTime!
  recordCount: Int!
}

"""Contract information extraction topic types"""
enum ExtractTopic {
  BASIC_INFO
  DELIVERABLES
  FINANCIAL
  LINE_ITEMS
  MILESTONES
  RATE_ITEMS
  RISK_CLAUSES
  TIME_INFO
}

type ExtractedFields {
  amount: String
  contractName: String
  contractNumber: String
  partyA: String
  partyB: String
  rawMatches: [FieldMatch!]!
  signDate: String
  validPeriod: String
}

type ExtractedTag {
  category: String!
  confidence: Float!
  name: String!
  source: String!
}

type ExtractionMetadata {
  fieldConfidences: JSON
  overallConfidence: Float
}

type ExtractionTaskResult {
  chunkId: String!
  data: JSONObject
  error: String
  processingTimeMs: Int!
  success: Boolean!
  tokensUsed: Int
}

type FeatureScore {
  feature: String!
  score: Float!
}

type FieldConflict {
  fieldName: String!
  needsResolution: Boolean!
  values: [FieldValue!]!
}

type FieldMatch {
  confidence: Float!
  field: String!
  value: String!
}

type FieldMetadataDto {
  conservativeThreshold: Float
  displayName: String!
  editable: Boolean!
  fieldName: String!
  fieldType: String!
  group: String!
  ragQuery: String
  ragSupported: Boolean!
}

type FieldScoreDetail {
  actualScore: Float!
  category: String!
  field: String!
  hasValue: Boolean!
  maxScore: Float!
}

type FieldValidationResult {
  confidence: Float!
  correctedValue: String
  field: String!
  isCorrect: Boolean!
  issue: String
  programValue: String
}

type FieldValue {
  confidence: Int!
  strategy: ParseStrategyType!
  value: String!
}

type FinancialInfo {
  amountWithTax: String
  amountWithoutTax: String
  currency: String
  paymentMethod: String
  paymentTerms: String
  taxRate: String
}

type FinancialTransaction {
  amount: Float!
  category: String!
  contractId: String!
  createdAt: DateTime!
  createdBy: String!
  currency: String!
  description: String
  dueDate: DateTime
  id: String!
  metadata: JSONObject
  occurredAt: DateTime!
  status: TransactionStatus!
  type: TransactionType!
  updatedAt: DateTime!
}

input FinancialTransactionFilterInput {
  category: String
  contractId: String
  endDate: String
  startDate: String
  status: TransactionStatus
  type: TransactionType
}

input FinancialTransactionPaginationInput {
  filter: FinancialTransactionFilterInput
  page: Int
  pageSize: Int
  sortBy: String
  sortOrder: String
}

type ForecastResult {
  confidence: Float!
  currentValue: Float!
  forecastValue: Float!
  metric: String!
  trend: String!
}

input GenerateCaseStudyInput {
  contractId: String!

  """自定义显示的金额（脱敏后）"""
  customDisplayAmount: String

  """自定义显示的客户名称（脱敏后）"""
  customDisplayCustomerName: String

  """自定义显示的行业"""
  customDisplayIndustry: String
  desensitize: Boolean = true

  """脱敏配置：可指定哪些字段需要脱敏"""
  desensitizeConfig: JSONObject

  """是否生成挑战部分"""
  includeChallenges: Boolean = true

  """是否生成成果部分"""
  includeResults: Boolean = true

  """是否生成解决方案部分"""
  includeSolution: Boolean = true

  """是否生成客户评价部分"""
  includeTestimonial: Boolean = false
  tags: [String!] = []

  """写作风格：professional, casual, technical"""
  writingStyle: String = "professional"
}

type GeneratedCaseStudiesResponse {
  items: [GeneratedCaseStudy!]!
  total: Int!
}

type GeneratedCaseStudy {
  challenges: String
  confidence: Float

  """关联合同"""
  contract: GeneratedCaseStudyContract
  contractId: String!
  createdAt: DateTime!

  """创建者"""
  createdBy: GeneratedCaseStudyUser
  createdById: String!
  desensitizeConfig: JSONObject
  displayAmount: String
  displayCustomerName: String
  displayIndustry: String
  fullMarkdown: String!
  generatedAt: DateTime
  id: String!
  isDesensitized: Boolean!
  isManuallyEdited: Boolean!
  lastEditedAt: DateTime
  lastEditedBy: String
  llmModel: String
  llmProvider: String
  results: String
  solution: String
  status: CaseStudyStatus!
  subtitle: String
  summary: String!
  tags: [String!]!
  teamSize: String
  techStack: String
  testimonial: String
  timeline: String
  title: String!
  updatedAt: DateTime!
  version: Int!
}

type GeneratedCaseStudyContract {
  contractNo: String!
  id: String!
  industry: String
  name: String!
  ourEntity: String!
}

type GeneratedCaseStudyResult {
  caseStudy: GeneratedCaseStudy
  error: String
  success: Boolean!
}

type GeneratedCaseStudyUser {
  email: String!
  id: String!
  name: String!
}

type HealthAlert {
  dimension: String!
  level: String!
  message: String!
  value: Float!
}

type HealthCheck {
  status: String!
  timestamp: String!
  version: String!
}

type HealthDimension {
  description: String!
  dimension: String!
  score: Float!
  trend: String!
}

type HybridStrategyInfo {
  correctedFieldsCount: Int
  enhancedFields: [String!]
  llmChunks: Int
  programParseScore: Int!
  reason: String!
  usedLlm: Boolean!
  usedValidation: Boolean
  validationResult: LlmValidationResult
}

type IndustryCases {
  count: Int!
  industry: String!
  totalValue: Float!
}

type IndustryCount {
  count: Int!
  industry: String!
  totalValue: Float!
}

"""信息提取类型"""
enum InfoType {
  BASIC_INFO
  DELIVERABLES
  FINANCIAL
  LINE_ITEMS
  MILESTONES
  RATE_ITEMS
  RISK_CLAUSES
  TIME_INFO
}

"""JSON custom scalar type"""
scalar JSON

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSONObject @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

type KPICategory {
  category: String!
  metrics: [KPIMetric!]!
}

type KPIMetric {
  achievement: Float
  name: String!
  previousValue: Float
  target: Float
  trend: String!
  unit: String!
  value: Float!
}

type LLMConfig {
  apiKey: String
  baseUrl: String
  maxTokens: Int!
  model: String!
  provider: String!
  temperature: Float!
  timeout: Int
}

type LegalClauseStats {
  """平均置信度"""
  avgConfidence: Float!

  """按类型统计"""
  byType: [LegalClauseTypeCount!]!

  """总条款数"""
  total: Int!
}

"""法务条款类型"""
enum LegalClauseType {
  GUARANTEE
  INTELLECTUAL_PROPERTY
  LIABILITY_LIMITATION
  TERMINATION_DISPUTE
}

type LegalClauseTypeCount {
  """数量"""
  count: Int!

  """条款类型"""
  type: LegalClauseType!
}

type LegalClausesExtractionResult {
  """整体置信度 (0-1)"""
  confidence: Float!

  """提取的法务条款列表"""
  extracted: [ContractLegalClause!]!

  """使用的LLM模型"""
  llmModel: String

  """使用的LLM提供商"""
  llmProvider: String

  """处理时间（毫秒）"""
  processingTimeMs: Int!
}

type LegalReview {
  contractId: String!
  createdAt: DateTime!
  findings: JSONObject!
  id: String!
  recommendations: String
  reviewedAt: DateTime
  reviewerId: String!
  riskLevel: String!
  status: ReviewStatus!
  updatedAt: DateTime!
}

input LegalReviewFilterInput {
  contractId: String
  endDate: String
  reviewerId: String
  riskLevel: LegalRiskLevel
  startDate: String
  status: ReviewStatus
}

input LegalReviewPaginationInput {
  filter: LegalReviewFilterInput
  page: Int
  pageSize: Int
  sortBy: String
  sortOrder: String
}

"""法务风险等级"""
enum LegalRiskLevel {
  CRITICAL
  HIGH
  LOW
  MEDIUM
}

type LlmParseResult {
  completenessScore: CompletenessScore
  confidence: Float
  error: String
  extractedData: ContractExtractedData
  extractedDataJson: JSONObject
  hybridStrategy: HybridStrategyInfo
  llmModel: String
  llmProvider: String
  llmTokensUsed: Int
  pageCount: Int
  processingTimeMs: Int
  rawText: String
  sessionId: String
  strategyUsed: ParseStrategy
  success: Boolean!
  warnings: [String!]
}

type LlmValidationResult {
  additionalFields: JSONObject
  overallAssessment: String
  validationResults: [FieldValidationResult!]!
}

input LoginInput {
  email: String!
  password: String!
}

type LoginRecord {
  createdAt: DateTime!
  failureReason: String
  id: String!
  ipAddress: String
  success: Boolean!
  userAgent: String
}

type MilestoneContractInfo {
  contractNo: String!
  customer: MilestoneCustomerInfo!
  customerId: ID!
  id: ID!
  name: String!
}

type MilestoneCustomerInfo {
  id: ID!
  name: String!
}

type MilestoneDetail {
  acceptanceCriteria: String
  acceptedAt: DateTime
  acceptedBy: ID
  acceptedByName: String
  actualDate: DateTime
  amount: String
  createdAt: DateTime!
  deliverableFileName: String
  deliverableFileUrl: String
  deliverableUploadedAt: DateTime
  deliverables: String
  id: ID!
  name: String!
  paymentPercentage: String
  plannedDate: DateTime
  rejectedAt: DateTime
  rejectedBy: ID
  rejectedByName: String
  rejectionReason: String
  sequence: Float!
  status: MilestoneStatus!
  statusHistory: [MilestoneStatusHistory!]!
  updatedAt: DateTime!
}

type MilestoneItem {
  actualDate: DateTime
  amount: Float
  contractNo: String!
  customerName: String!
  daysOverdue: Int
  id: String!
  name: String!
  plannedDate: DateTime
  status: MilestoneStatus!
}

type MilestoneOverview {
  completedCount: Int!
  overdueCount: Int!
  overdueMilestones: [MilestoneItem!]!
  pendingCount: Int!
  totalMilestones: Int!
  upcomingMilestones: [MilestoneItem!]!
}

"""里程碑状态"""
enum MilestoneStatus {
  ACCEPTED
  DELIVERED
  IN_PROGRESS
  PENDING
  REJECTED
}

type MilestoneStatusHistory {
  changedAt: DateTime!
  changedBy: ID!
  changedByName: String!
  fromStatus: MilestoneStatus!
  id: ID!
  notes: String
  toStatus: MilestoneStatus!
}

type ModelTestResult {
  latency: Int
  message: String
  success: Boolean!
}

type MonthlyRevenue {
  amount: Float!
  count: Int!
  month: String!
}

type MonthlySales {
  month: String!
  newSignValue: Float!
  renewalValue: Float!
  totalValue: Float!
}

type MonthlyScore {
  month: String!
  score: Float!
}

type MonthlyUtilization {
  hoursAllocated: Int!
  month: String!
  value: Float!
}

input MultiStrategyParseInput {
  content: String!
  options: JSONObject
  strategies: [String!]!
  voteConfig: JSONObject
}

type MultiStrategyParseResult {
  conflicts: [String!]!
  duration: Int!
  finalFields: JSONObject!
  overallConfidence: Float!
  results: [VotingStrategyResult!]!
  timestamp: String
  voteResults: [VoteResult!]!
  warnings: [String!]!
}

type Mutation {
  """验收通过里程碑"""
  acceptMilestone(input: AcceptMilestoneInput!): MilestoneDetail!
  addCustomerContact(customerId: ID!, input: CreateContactInput!): CustomerContact!
  applyCorrection(contractId: ID!, fieldName: String!, newValue: String!): Contract!

  """Archive a notification"""
  archiveNotification(id: String!): Notification!

  """Assign a tag to a contract"""
  assignTagToContract(contractId: ID!, tagId: ID!): Boolean!

  """Batch assign tags to a contract"""
  assignTagsToContract(contractId: ID!, tagIds: [ID!]!): Boolean!

  """自动分类合同"""
  autoClassifyContract(contractId: String!): ClassificationResult!

  """Vectorize multiple contracts"""
  batchVectorizeContracts(force: Boolean = false, ids: [ID!]!, method: String = "MANUAL"): BatchVectorizationResult!

  """Change your own password"""
  changePassword(input: ChangePasswordInput!): ChangePasswordResult!

  """对合同文本进行语义分段 - 返回分段的元数据和位置信息"""
  chunkTextSemantically(input: SemanticChunkInput!): SemanticChunkResult!

  """清理过期缓存并返回清理数量"""
  cleanExpiredCache: String!

  """清空所有缓存"""
  clearAllCache: Boolean!

  """将文档转换为Markdown"""
  convertDocumentToMarkdown(filePath: String!, options: DoclingConvertOptions): DoclingConvertResult!

  """将已上传的文件转换为Markdown (从MinIO获取文件)"""
  convertUploadedFileToMarkdown(objectName: String!, options: DoclingConvertOptions, skipCache: Boolean = false): DoclingConvertResult!

  """Create database backup"""
  createBackup: String!

  """Create bulk notifications for multiple users"""
  createBulkNotifications(input: CreateBulkNotificationsInput!): SuccessResponse!

  """Create a case study manually"""
  createCaseStudy(input: CreateCaseStudyInput!): GeneratedCaseStudy!

  """Create a new contract"""
  createContract(input: CreateContractInput!): Contract!
  createCustomer(input: CreateCustomerInput!): Customer!

  """Create a new department (Admin only)"""
  createDepartment(input: CreateDepartmentInput!): Department!

  """创建财务交易"""
  createFinancialTransaction(input: CreateFinancialTransactionInput!): FinancialTransaction!

  """手动创建法务条款"""
  createLegalClause(input: CreateLegalClauseInput!): ContractLegalClause!

  """创建法务审查"""
  createLegalReview(input: CreateLegalReviewInput!): LegalReview!

  """Create a new notification"""
  createNotification(input: CreateNotificationInput!): Notification!

  """Create a new contract or update existing one if duplicate"""
  createOrUpdateContract(forceUpdate: Boolean = false, input: CreateContractInput!, operatorId: ID): Contract!

  """创建解析进度会话 - 返回sessionId，用于后续查询进度"""
  createParseSession(objectName: String!): String!

  """创建风险告警"""
  createRiskAlert(input: CreateRiskAlertInput!): RiskAlertModel!

  """Create a new tag"""
  createTag(input: CreateTagInput!): Tag!

  """Create a new user (Admin only)"""
  createUser(input: CreateUserInput!): User!

  """Delete a backup"""
  deleteBackup(filename: String!): Boolean!

  """Delete a case study"""
  deleteCaseStudy(id: String!): Boolean!

  """Delete a contract"""
  deleteContract(id: ID!): Boolean!

  """删除合同的所有法务条款"""
  deleteContractLegalClauses(contractId: String!): String!
  deleteCustomer(id: ID!): Customer!

  """删除数据保护条款"""
  deleteDataProtection(contractId: String!): ContractDataProtection!

  """Delete a department (Admin only)"""
  deleteDepartment(id: String!): DeleteResult!

  """删除文件"""
  deleteFile(objectName: String!): Boolean!

  """删除财务交易"""
  deleteFinancialTransaction(id: String!): Boolean!

  """删除法务条款"""
  deleteLegalClause(id: Int!): ContractLegalClause!

  """Delete a notification"""
  deleteNotification(id: String!): SuccessResponse!

  """Delete a tag (soft delete)"""
  deleteTag(id: String!): TagDeleteResult!

  """从Markdown内容或文件名中检测合同类型"""
  detectContractType(fileName: String, markdown: String!): ContractTypeDetectionResult!

  """忽略风险告警"""
  dismissRiskAlert(id: String!): RiskAlertModel!

  """Export system configuration"""
  exportConfig: String!

  """导出合同列表"""
  exportContracts(columns: [String!], format: ExportFormat = EXCEL, title: String): ExportResult!

  """导出客户列表"""
  exportCustomers(columns: [String!], format: ExportFormat = EXCEL, title: String): ExportResult!

  """导出财务数据"""
  exportFinancial(columns: [String!], format: ExportFormat = EXCEL, title: String): ExportResult!

  """导出里程碑数据"""
  exportMilestones(columns: [String!], format: ExportFormat = EXCEL, title: String): ExportResult!

  """从合同文本中提取数据保护条款（AI提取）"""
  extractDataProtection(content: String!, contractId: String!): DataProtectionExtractionResult!

  """从文档中提取指定字段"""
  extractDocumentFields(filePath: String!, topics: [String!]!): DoclingExtractResult!

  """从合同文本中提取法务条款（AI提取）"""
  extractLegalClauses(content: String!, contractId: String!): LegalClausesExtractionResult!

  """只提取里程碑信息 - 专门用于项目外包类合同"""
  extractMilestones(text: String!): JSONObject!

  """提取标签"""
  extractTags(contractId: String!): [ExtractedTag!]!

  """Extract contract information using RAG"""
  extractWithRAG(contractId: ID!, queries: [TopicQueryDto!]!): [RAGExtractResult!]!

  """Generate a case study from a contract using AI"""
  generateCaseStudy(input: GenerateCaseStudyInput!): GeneratedCaseStudyResult!

  """生成合同画像"""
  generateProfile(contractId: String!): ContractProfile!

  """Generate vector index for a contract"""
  indexContract(content: String!, contractId: ID!): Boolean!

  """Login with email and password"""
  login(input: LoginInput!): AuthResponse!

  """Mark all notifications as read for current user"""
  markAllNotificationsRead: SuccessResponse!

  """Mark a notification as read"""
  markNotificationRead(id: String!): Notification!

  """Parse a document and extract contract fields"""
  parseAndExtract(objectName: String!): ParseResult!

  """使用基于任务的策略解析合同 - 将信息提取分解为多个独立任务并行执行"""
  parseByTasks(taskTypes: [String!], text: String!): JSONObject!

  """Parse contract from uploaded file with hybrid strategy"""
  parseContractWithLlm(objectName: String!, sessionId: String): LlmParseResult!

  """使用指定策略解析文档"""
  parseWith(content: String!, options: JSONObject, strategy: ParseStrategyType!): JSONObject!

  """使用并发模式解析合同 - Map-Reduce模式，适合大合同，大幅提升速度"""
  parseWithConcurrent(input: ConcurrentParseInput!): OptimizedParseResult!

  """Parse contract text with mixed strategy (programmatic + LLM)"""
  parseWithLlm(input: ParseWithLlmInput!): LlmParseResult!

  """使用多策略解析文档"""
  parseWithMulti(content: String!, options: JSONObject, strategies: [ParseStrategyType!]!): JSONObject!

  """使用多个策略解析合同并进行投票"""
  parseWithMultiStrategies(input: MultiStrategyParseInput!): MultiStrategyParseResult!

  """使用优化策略解析合同 - 自动选择最佳解析模式（语义分段/RAG/并发）"""
  parseWithOptimized(input: ParseWithOptimizedInput!): OptimizedParseResult!

  """使用RAG模式解析合同 - 只提取相关字段相关的内容，减少token消耗"""
  parseWithRag(input: RagParseInput!): OptimizedParseResult!

  """使用语义分段模式解析合同 - 适合中等大小合同"""
  parseWithSemantic(fields: [String!], text: String!): OptimizedParseResult!
  ragBatchCorrectStart(contractId: ID!): String!
  ragCorrectField(contractId: ID!, fieldName: String!): CorrectionSuggestionDto!
  ragEvaluateSuspiciousFields(contractId: ID!): EvaluateResultDto!

  """记录付款"""
  recordPayment(input: RecordPaymentInput!): FinancialTransaction!

  """Regenerate an existing case study"""
  regenerateCaseStudy(id: String!, input: RegenerateCaseStudyInput): GeneratedCaseStudyResult!

  """Register a new user"""
  register(input: RegisterInput!): User!

  """拒绝里程碑"""
  rejectMilestone(input: RejectMilestoneInput!): MilestoneDetail!

  """Remove vectorization data from a contract"""
  removeContractVectorization(id: ID!): Boolean!
  removeCustomerContact(contactId: ID!): CustomerContact!

  """Remove a tag from a contract"""
  removeTagFromContract(contractId: ID!, tagId: ID!): Boolean!

  """Request password reset email"""
  requestPasswordReset(email: String!): Boolean!

  """重置嵌入模型配置为默认值"""
  resetEmbeddingConfig: EmbeddingConfig!

  """重置LLM配置为默认值"""
  resetLLMConfig: LLMConfig!

  """重置OCR配置为默认值"""
  resetOCRConfig: OCRConfig!

  """Reset password with token"""
  resetPassword(newPassword: String!, token: String!): Boolean!

  """Reset user password (Admin only)"""
  resetUserPassword(id: String!): ResetPasswordResult!

  """解决多策略解析结果中的冲突"""
  resolveConflicts(documentText: String!, input: ResolveConflictsInput!): MultiStrategyParseResult!

  """Restore from backup"""
  restoreBackup(filename: String!): String!

  """保存嵌入模型配置"""
  saveEmbeddingConfig(apiKey: String, baseUrl: String, dimensions: Float, model: String, provider: String): EmbeddingConfig!

  """保存LLM配置"""
  saveLLMConfig(config: UpdateSystemConfigInput!): LLMConfig!

  """保存OCR配置"""
  saveOCRConfig(engine: String): OCRConfig!

  """保存风险评估结果"""
  saveRiskAssessment(input: SaveRiskAssessmentInput!): RiskAssessmentHistory!

  """发送通知"""
  sendNotification(input: SendNotificationInput!): NotificationResult!
  setPrimaryContact(contactId: ID!): CustomerContact!

  """异步启动合同解析 - 立即返回sessionId，通过进度查询API获取进度"""
  startParseContractAsync(
    """合同类型（可选，用于确定解析的主题批次）"""
    contractType: String

    """预转换的Markdown内容（前端已通过Docling转换）"""
    markdown: String
    objectName: String!

    """原始文件名（用于合同类型检测）"""
    originalFileName: String

    strategy: ParseStrategyType
  ): AsyncParseStartResponse!

  """提交法务审查"""
  submitLegalReview(id: String!): LegalReview!

  """测试嵌入模型连接"""
  testEmbeddingConnection(apiKey: String, baseUrl: String, model: String, provider: String): ModelTestResult!

  """测试LLM连接"""
  testLLMConnection(apiKey: String, baseUrl: String, model: String, provider: String): ModelTestResult!

  """测试SMTP连接"""
  testSmtpConnection: Boolean!

  """测试指定策略的可用性"""
  testStrategyAvailability(strategy: ParseStrategyType!): StrategyTestResult!

  """Toggle user active status (Admin only)"""
  toggleUserStatus(id: String!): User!

  """Update a case study"""
  updateCaseStudy(id: String!, input: UpdateCaseStudyInput!): GeneratedCaseStudy!

  """Update case study status"""
  updateCaseStudyStatus(id: String!, input: UpdateCaseStudyStatusInput!): GeneratedCaseStudy!

  """Update an existing contract"""
  updateContract(id: ID!, input: UpdateContractInput!): Contract!
  updateCustomer(id: ID!, input: UpdateCustomerInput!): Customer!
  updateCustomerContact(contactId: ID!, input: UpdateContactInput!): CustomerContact!

  """更新数据保护条款"""
  updateDataProtection(confidence: Int, contractId: String!, crossBorderTransfer: String, dataRetention: String, involvesPersonalData: Boolean, originalText: String, personalDataType: String, processingLocation: String, riskLevel: DataProtectionRisk, securityMeasures: String): ContractDataProtection!

  """Update a department (Admin only)"""
  updateDepartment(id: String!, input: UpdateDepartmentInput!): Department!

  """更新财务交易"""
  updateFinancialTransaction(id: String!, input: UpdateFinancialTransactionInput!): FinancialTransaction!

  """更新法务条款"""
  updateLegalClause(breachLiability: String, compensationMethod: String, confidence: Int, disputeLocation: String, disputeResolution: String, exclusions: String, guaranteeAmount: String, guaranteePeriod: String, guaranteeType: String, guarantor: String, id: Int!, liabilityLimit: String, licenseFee: String, licenseType: String, originalText: String, terminationNotice: String): ContractLegalClause!

  """更新法务审查"""
  updateLegalReview(id: String!, input: UpdateLegalReviewInput!): LegalReview!

  """更新里程碑状态"""
  updateMilestoneStatus(input: UpdateMilestoneStatusInput!): MilestoneDetail!

  """Update notification preferences"""
  updateNotificationPreferences(input: UpdateNotificationPreferencesInput!): NotificationPreference!

  """更新风险告警"""
  updateRiskAlert(id: String!, input: UpdateRiskAlertInput!): RiskAlertModel!

  """更新解析策略配置"""
  updateStrategyConfig(input: UpdateParseStrategyConfigInput!): ParseStrategyConfig!

  """更新系统配置"""
  updateSystemConfig(config: UpdateSystemConfigInput!): SystemConfig!

  """Update a tag"""
  updateTag(id: String!, input: UpdateTagInput!): Tag!

  """Update a user (Admin only)"""
  updateUser(id: String!, input: UpdateUserInput!): User!

  """上传交付物"""
  uploadDeliverable(input: UploadDeliverableInput!): MilestoneDetail!

  """创建或更新数据保护条款"""
  upsertDataProtection(input: CreateDataProtectionInput!): ContractDataProtection!

  """Vectorize a contract for RAG search"""
  vectorizeContract(force: Boolean = false, id: ID!, method: String = "MANUAL"): VectorizationResult!
}

type Notification {
  createdAt: DateTime!
  email: Boolean!
  expiresAt: DateTime
  id: String!
  inApp: Boolean!
  link: String
  message: String!
  metadata: JSONObject
  priority: NotificationPriority!
  readAt: DateTime
  sms: Boolean!
  title: String!
  type: NotificationType!
  updatedAt: DateTime!
  user: User
  userId: String!
}

type NotificationPreference {
  contractApproval: Boolean!
  contractExpiry: Boolean!
  createdAt: DateTime!
  documentShared: Boolean!
  enableEmail: Boolean!
  enableInApp: Boolean!
  enableSms: Boolean!
  id: String!
  mention: Boolean!
  milestoneDue: Boolean!
  paymentOverdue: Boolean!
  quietHoursEnd: String
  quietHoursStart: String
  riskAlert: Boolean!
  systemAnnouncement: Boolean!
  taskAssigned: Boolean!
  updatedAt: DateTime!
  userId: String!
}

"""通知优先级"""
enum NotificationPriority {
  HIGH
  LOW
  NORMAL
  URGENT
}

type NotificationResult {
  message: String
  messageId: String
  success: Boolean!
}

"""通知类型"""
enum NotificationType {
  CONTRACT_APPROVAL
  CONTRACT_EXPIRY
  DOCUMENT_SHARED
  MENTION
  MILESTONE_DUE
  PAYMENT_OVERDUE
  RISK_ALERT
  SYSTEM_ANNOUNCEMENT
  TASK_ASSIGNED
}

type NotificationsResponse {
  items: [Notification!]!
  total: Int!
}

type OCRConfig {
  engine: String!
}

type OptimizedParseResult {
  chunks: SemanticChunkInfo
  confidence: Float
  error: String
  extractedData: ContractExtractedData
  extractedDataJson: JSONObject
  llmModel: String
  llmProvider: String
  mode: ParseMode!
  processingTimeMs: Int!
  strategy: String
  success: Boolean!
  taskResults: [ExtractionTaskResult!]
  totalChunks: Int
  totalTokensUsed: Int
  warnings: [String!]
}

type OtherInfo {
  copies: Float
  industry: String
  salesPerson: String
  signLocation: String
}

type OverdueAlert {
  amount: Float!
  contractId: String!
  contractNo: String!
  customerName: String!
  daysOverdue: Int!
  expectedDate: DateTime!
  level: OverdueLevel!
}

"""逾期等级"""
enum OverdueLevel {
  CRITICAL
  HIGH
  LOW
  MEDIUM
}

type PaginatedCustomers {
  hasMore: Boolean!
  items: [Customer!]!
  total: Int!
}

type PaginatedFinancialTransactions {
  items: [FinancialTransaction!]!
  page: Float!
  pageSize: Float!
  total: Float!
  totalPages: Float!
}

type PaginatedLegalReviews {
  items: [LegalReview!]!
  page: Float!
  pageSize: Float!
  total: Float!
  totalPages: Float!
}

type PaginatedRiskAlerts {
  items: [RiskAlertModel!]!
  page: Float!
  pageSize: Float!
  total: Float!
  totalPages: Float!
}

type PaginatedRiskAssessments {
  items: [RiskAssessmentHistory!]!
  page: Float!
  pageSize: Float!
  total: Float!
  totalPages: Float!
}

"""合同解析模式"""
enum ParseMode {
  AUTO
  CONCURRENT
  LEGACY
  RAG
  SEMANTIC
}

type ParseResult {
  error: String
  extractedFields: ExtractedFields
  pageCount: Int
  success: Boolean!
  text: String
}

type ParseResultDto {
  completeness: Int!
  confidence: Int!
  duration: Int!
  fields: String!
  strategy: ParseStrategyType!
  timestamp: String
  warnings: [String!]!
}

type ParseSessionProgressInfo {
  chunks: [ChunkProgressInfo!]!
  completedChunks: Int!
  completedTasks: Int!
  currentChunkIndex: Int!
  currentStage: String!
  currentTaskInfo: String
  error: String
  estimatedEndTime: Int
  estimatedRemainingSeconds: Int
  extractedFieldsCount: Int
  markdownContent: String
  objectName: String!
  processingTimeMs: Int
  progressPercentage: Int!
  resultData: JSONObject
  sessionId: String!
  startTime: Int!
  status: SessionStatus!
  tasks: [TaskProgressInfo!]!
  totalChunks: Int!
  totalTasks: Int!
}

"""Document parsing status"""
enum ParseStatus {
  """解析完成"""
  COMPLETED

  """解析失败"""
  FAILED

  """人工审核中"""
  MANUAL_REVIEW

  """待解析"""
  PENDING

  """解析中"""
  PROCESSING
}

"""Strategy for parsing contracts based on completeness score"""
enum ParseStrategy {
  DIRECT_USE
  DOCLING
  LLM_FULL_EXTRACTION
  LLM_VALIDATION
  RAG
}

type ParseStrategyConfig {
  autoMultiStrategy: Boolean!
  defaultStrategy: ParseStrategyType
  enabledStrategies: [ParseStrategyType!]!
  multiStrategyThreshold: Int
  multiStrategyVoters: [ParseStrategyType!]
}

"""合同解析策略类型"""
enum ParseStrategyType {
  DOCLING
  LLM
  MULTI
  RAG
  RULE
}

input ParseWithLlmInput {
  contractId: String
  forceStrategy: ParseStrategy
  programmaticResult: JSONObject
  textContent: String!
}

input ParseWithOptimizedInput {
  """合同ID（可选）"""
  contractId: String

  """强制使用指定的解析策略（仅用于调试）"""
  forceStrategy: ParseStrategy

  """每字段最大chunks数（仅用于RAG模式，默认3）"""
  maxChunksPerField: Int

  """最大并发数（仅用于CONCURRENT模式，默认3）"""
  maxConcurrent: Int

  """
  解析模式: AUTO-自动选择, SEMANTIC-语义分段, RAG-向量检索增强, CONCURRENT-并发处理, LEGACY-原有策略
  """
  mode: ParseMode! = AUTO

  """目标字段列表（可选，未指定则提取所有字段）"""
  targetFields: [String!]

  """合同文本内容"""
  textContent: String!
}

type PartiesInfoType {
  additionalParties: [AdditionalParty!]!
  firstParty: PartyInfo!
  secondParty: PartyInfo!
}

type PartyInfo {
  authorizedSignatory: AuthorizedSignatory
  contactPerson: ContactPerson
  legalEntityType: String
  name: String
  operationalAddress: String
  registeredAddress: String
  registrationNumber: String
}

type PresignedUrl {
  expiresIn: Int!
  objectName: String!
  url: String!
}

type ProductLineItem {
  id: ID!
  productName: String!
  quantity: Float!
  specification: String
  subtotal: String!
  unit: String!
  unitPriceWithTax: String!
  unitPriceWithoutTax: String
}

input ProductLineItemInput {
  productName: String!
  quantity: Int!
  specification: String
  subtotal: String
  unit: String = "套"
  unitPriceWithTax: String!
  unitPriceWithoutTax: String
}

type ProductSalesDetail {
  afterSalesTerms: String
  deliveryContent: String
  deliveryDate: DateTime
  deliveryLocation: String
  id: ID!
  ipOwnership: String
  lineItems: [ProductLineItem!]!
  shippingResponsibility: String
  warrantyPeriod: String
}

input ProductSalesDetailInput {
  afterSalesTerms: String
  deliveryContent: String
  deliveryDate: DateTime
  deliveryLocation: String
  ipOwnership: String
  lineItems: [ProductLineItemInput!]
  shippingResponsibility: String
  warrantyPeriod: String
}

type ProjectMilestone {
  acceptanceCriteria: String
  actualDate: DateTime
  amount: String
  deliverables: String
  id: ID!
  name: String!
  paymentPercentage: String
  plannedDate: DateTime
  sequence: Float!
  status: MilestoneStatus!
}

input ProjectMilestoneInput {
  acceptanceCriteria: String
  actualDate: DateTime
  amount: String
  deliverables: String
  name: String!
  paymentPercentage: String
  plannedDate: DateTime
  sequence: Int!
  status: MilestoneStatus = PENDING
}

type ProjectMilestoneWithContract {
  acceptanceCriteria: String
  acceptedAt: DateTime
  acceptedBy: ID
  acceptedByName: String
  actualDate: DateTime
  amount: String
  contract: MilestoneContractInfo!
  createdAt: DateTime!
  deliverableFileName: String
  deliverableFileUrl: String
  deliverableUploadedAt: DateTime
  deliverables: String
  id: ID!
  name: String!
  paymentPercentage: String
  plannedDate: DateTime
  rejectedAt: DateTime
  rejectedBy: ID
  rejectedByName: String
  rejectionReason: String
  sequence: Int!
  status: MilestoneStatus!
  updatedAt: DateTime!
}

type ProjectOutsourcingDetail {
  acceptanceCriteria: String
  acceptanceFlow: String
  changeManagementFlow: String
  deliverables: String
  id: ID!
  milestones: [ProjectMilestone!]!
  sowSummary: String
}

input ProjectOutsourcingDetailInput {
  acceptanceCriteria: String
  acceptanceFlow: String
  changeManagementFlow: String
  deliverables: String
  milestones: [ProjectMilestoneInput!]
  sowSummary: String
}

type ProjectOverview {
  byCustomer: [CustomerProjects!]!
  byStatus: [StatusCount!]!
  completionRate: Float!
  totalProjects: Int!
}

type Query {
  """获取活跃告警"""
  activeAlerts(severity: RiskSeverity): [RiskAlertModel!]!

  """获取合同告警历史"""
  alertHistory(contractId: String!): [RiskAlertModel!]!

  """多维度分析"""
  analyzeByDimension(dimension: String!, groupBy: String): [AnalyticsDimension!]!

  """评估合同风险"""
  assessContractRisk(contractId: String!): RiskAssessment!

  """Get distinct audit actions for filtering"""
  auditActions: [String!]!

  """Get distinct entity types for filtering"""
  auditEntityTypes: [String!]!

  """Get paginated audit logs"""
  auditLogs(filter: AuditLogFilterInput, page: Int! = 1, pageSize: Int! = 50): AuditLogConnection!

  """Get all available embedding models"""
  availableEmbeddingModels: [EmbeddingModelInfo!]!

  """获取所有可用的解析策略及其信息"""
  availableStrategies: [StrategyInfo!]!

  """批量评估多个字段的质量"""
  batchEvaluateFields(documentText: String!, fields: JSONObject!, options: JSONObject): JSONObject

  """获取最佳可用策略"""
  bestStrategy: ParseStrategyType

  """获取缓存统计信息"""
  cacheStats: CacheStats!

  """Calculate completeness score for extracted fields"""
  calculateCompleteness(extractedFields: JSONObject!): CompletenessScore!

  """计算主题完整性分数"""
  calculateTopicCompleteness(results: JSONObject!): TopicCompletenessScore!

  """Check if a contract can be vectorized"""
  canVectorizeContract(id: ID!): CanVectorizeResult!

  """获取案例库概览"""
  caseOverview: CaseOverview!

  """Get all case studies with optional filters"""
  caseStudies(contractId: String, limit: Int, offset: Int, status: CaseStudyStatus): GeneratedCaseStudiesResponse!

  """Get case studies for a specific contract"""
  caseStudiesByContract(contractId: String!): [GeneratedCaseStudy!]!

  """Get a single case study by ID"""
  caseStudy(id: String!): GeneratedCaseStudy

  """获取现金流预测"""
  cashFlowForecast(months: Int = 6): [CashFlowForecast!]!

  """Check if a contract number already exists"""
  checkContractDuplicate(contractNo: String!): DuplicateCheckResult!

  """获取公司健康度"""
  companyHealth: CompanyHealth!

  """比较两个解析会话的结果"""
  compareParseSessions(sessionId1: String!, sessionId2: String!): JSONObject

  """对比当前vs历史风险评分"""
  compareRiskScores(contractId: String!): String!

  """获取合规概览"""
  complianceOverview: ComplianceOverview!

  """Get a single contract by ID"""
  contract(id: ID!): Contract

  """Get a contract by contract number"""
  contractByNo(contractNo: String!): Contract

  """Get all chunks for a contract"""
  contractChunks(contractId: ID!): [RAGContractChunk!]!

  """获取合同合规扫描结果"""
  contractCompliance(contractId: String!): ContractCompliance!

  """获取合同的数据保护条款"""
  contractDataProtection(contractId: String!): ContractDataProtection
  contractFieldConfigs: [FieldMetadataDto!]!

  """获取合同的所有法务条款"""
  contractLegalClauses(contractId: String!): [ContractLegalClause!]!

  """获取合同风险评分"""
  contractRiskScore(contractId: String!): ContractRiskScore!

  """Get paginated list of contracts"""
  contracts(filter: ContractFilterInput, orderBy: ContractOrderInput, skip: Int = 0, take: Int = 20): ContractConnection!

  """查询涉及个人数据的合同"""
  contractsWithPersonalData: [ContractDataProtection!]!

  """获取核心KPI指标"""
  coreKPIs(period: String = "monthly"): CoreKPIs!
  customer(id: ID!): Customer!

  """获取客户360°视图"""
  customer360(customerId: String!): Customer360
  customerContacts(customerId: ID!): [CustomerContact!]!

  """获取客户概览"""
  customerOverview: CustomerOverview!
  customerStats(id: ID!): CustomerStats!
  customers(filter: CustomerFilterInput): PaginatedCustomers!

  """按风险等级查询数据保护条款"""
  dataProtectionByRiskLevel(riskLevel: DataProtectionRisk!): [ContractDataProtection!]!

  """获取数据保护统计信息"""
  dataProtectionStats: DataProtectionStats!

  """Get a single department by ID (Admin only)"""
  department(id: String!): Department

  """Get all departments"""
  departments(includeInactive: Boolean! = false): [Department!]!

  """检测风险条款"""
  detectRiskClauses(contractId: String!): [RiskClause!]!

  """检查Docling服务是否可用"""
  doclingAvailable: Boolean!

  """获取Docling版本"""
  doclingVersion: String

  """获取嵌入模型配置"""
  embeddingConfig: EmbeddingConfig!

  """Get current embedding model configuration"""
  embeddingModel: EmbeddingModelInfo!

  """评估单个字段值的提取质量"""
  evaluateFieldQuality(documentText: String!, fieldName: String!, value: JSONObject!): JSONObject

  """评估两个值的相似度"""
  evaluateValueSimilarity(documentText: String!, fieldName: String!, valueA: JSONObject!, valueB: JSONObject!): JSONObject

  """获取履约证据链"""
  evidenceChain(contractId: String!): EvidenceChain!

  """
  Extract basic contract fields (identification, parties, term) from text
  """
  extractBasicFields(textContent: String!): BasicExtractedFieldsType!

  """Extract contract fields from provided text"""
  extractFieldsFromText(text: String!): ExtractedFields!

  """检查文件是否存在"""
  fileExists(objectName: String!): Boolean!

  """获取财务交易列表（分页）"""
  financialTransactions(pagination: FinancialTransactionPaginationInput): PaginatedFinancialTransactions!

  """查找相似合同"""
  findSimilarContracts(contractId: String!, limit: Int = 5): [SimilarContract!]!

  """预测分析"""
  forecast(metric: String!): ForecastResult!

  """获取所有活跃的解析会话进度"""
  getAllParseProgress: [ParseSessionProgressInfo!]!

  """获取文件预签名URL"""
  getFileUrl(expirySeconds: Int = 3600, objectName: String!): PresignedUrl!

  """获取主题缺失的必填字段"""
  getMissingFields(data: JSONObject!, topicName: String!): [String!]!

  """获取多策略解析结果（通过sessionId）"""
  getMultiStrategyParseResult(sessionId: String!): MultiStrategyParseResult

  """查询LLM解析的实时进度 - 通过sessionId获取分块处理状态"""
  getParseProgress(sessionId: String!): ParseSessionProgressInfo

  """获取异步解析的结果 - 解析完成后调用此接口获取完整数据"""
  getParseResult(sessionId: String!): JSONObject

  """获取风险预警"""
  getRiskAlerts(limit: Int = 10): [RiskAlert!]!

  """获取语义分段的示例（用于调试和测试）"""
  getSemanticChunkExample(text: String!): [SemanticChunkInfo!]!

  """获取主题字段值（带元数据）"""
  getTopicFieldValues(data: JSONObject!, topicName: String!): [TopicFieldValue!]!

  """趋势分析"""
  getTrend(metric: String!, periods: Int = 12): [TrendPoint!]!

  """健康检查"""
  health: HealthCheck!

  """获取法务条款统计信息"""
  legalClauseStats: LegalClauseStats!

  """按类型查询合同法务条款"""
  legalClausesByType(clauseType: LegalClauseType!, contractId: String!): [ContractLegalClause!]!

  """获取单个法务审查"""
  legalReview(id: String!): LegalReview!

  """获取法务审查列表（分页）"""
  legalReviews(pagination: LegalReviewPaginationInput): PaginatedLegalReviews!

  """List all backups"""
  listBackups: String!

  """获取LLM配置"""
  llmConfig: LLMConfig!

  """Get login history for current user"""
  loginHistory(limit: Int = 10): [LoginRecord!]!

  """Get current authenticated user"""
  me: User!

  """获取里程碑详情（包含状态历史）"""
  milestoneDetail(id: String!): MilestoneDetail!

  """获取里程碑概览"""
  milestoneOverview: MilestoneOverview!

  """获取里程碑状态历史"""
  milestoneStatusHistory(milestoneId: String!): [MilestoneStatusHistory!]!

  """Get a single notification by ID"""
  notification(id: String!): Notification

  """Get unread notification count for current user"""
  notificationCount: Int!

  """Get notification preferences for current user"""
  notificationPreferences: NotificationPreference!

  """Get notifications for current user"""
  notifications(limit: Int, offset: Int, type: NotificationType, unreadOnly: Boolean): NotificationsResponse!

  """获取OCR配置"""
  ocrConfig: OCRConfig!

  """获取逾期预警"""
  overdueAlerts: [OverdueAlert!]!

  """Parse a document from storage and extract text content"""
  parseDocument(objectName: String!): ParseResult!

  """获取合同付款历史"""
  paymentHistory(contractId: String!): [FinancialTransaction!]!

  """获取待处理付款列表"""
  pendingPayments(departmentId: String, limit: Int = 50): [FinancialTransaction!]!

  """获取待审查列表"""
  pendingReviews(departmentId: String): [LegalReview!]!

  """检查pgvector扩展是否可用"""
  pgVectorStatus: Boolean!

  """获取所有项目里程碑（带合同信息）"""
  projectMilestones: [ProjectMilestoneWithContract!]!

  """获取项目交付概览"""
  projectOverview: ProjectOverview!
  ragCorrectionProgress(sessionId: String!): BatchCorrectionProgressDto

  """RAG Question Answer - search contracts by natural language question"""
  ragQuestionAnswer(limit: Int = 10, question: String!, threshold: Float = 0.5): [RAGQuestionAnswerResult!]!
  ragSupportedFields: [FieldMetadataDto!]!

  """获取续约看板"""
  renewalOverview: RenewalOverview!

  """获取资源利用率"""
  resourceUtilization: ResourceUtilization!

  """获取收入统计"""
  revenueStats(filter: RevenueFilterInput): RevenueStats!

  """获取风险告警列表（分页）"""
  riskAlerts(pagination: RiskAlertPaginationInput): PaginatedRiskAlerts!

  """获取风险评估历史"""
  riskAssessmentHistory(contractId: String!, page: Int = 1, pageSize: Int = 20): PaginatedRiskAssessments!

  """获取风险热力图"""
  riskHeatmap(groupBy: String = "department"): RiskHeatmap!

  """获取风险概览"""
  riskOverview: RiskOverview!

  """获取销售业绩"""
  salesPerformance(year: Int): SalesPerformance!

  """搜索合同知识库"""
  searchContracts(input: ContractSearchInput!): SearchResponse!

  """搜索数据保护条款（跨合同）"""
  searchDataProtection(hasCrossBorderTransfer: Boolean, involvesPersonalData: Boolean, riskLevel: DataProtectionRisk): [ContractDataProtection!]!

  """全局搜索法务条款（跨合同）"""
  searchLegalClauses(clauseType: LegalClauseType, disputeResolution: String, guaranteeType: String, minLiability: Int): [ContractLegalClause!]!

  """语义搜索合同"""
  semanticSearch(limit: Int = 10, query: String!): [SemanticSearchResult!]!

  """获取当前解析策略配置"""
  strategyConfig: ParseStrategyConfig!

  """获取系统配置"""
  systemConfig: SystemConfig!

  """获取系统健康状态"""
  systemHealth: SystemHealth!

  """Get a single tag by ID"""
  tag(id: String!): Tag

  """Get all tag categories"""
  tagCategories: [String!]!

  """获取智能标签概览"""
  tagOverview: TagOverview!

  """Get all tags"""
  tags(category: String, includeInactive: Boolean! = false, search: String): [Tag!]!

  """测试所有策略的可用性"""
  testAllStrategies: [StrategyTestResult!]!

  """Test connection to an embedding model"""
  testEmbeddingConnection(config: JSONObject!): Boolean!

  """获取单个主题定义"""
  topic(name: String!): TopicDefinition

  """获取主题的字段定义"""
  topicFields(topicName: String!): [TopicField!]!

  """获取所有主题定义"""
  topics: [TopicDefinition!]!

  """Get a single user by ID (Admin only)"""
  user(id: String!): User

  """Get paginated users (Admin only)"""
  users(filter: UserFilterInput, page: Int! = 1, pageSize: Int! = 20): UserConnection!

  """获取向量缓存统计信息"""
  vectorCacheStats: VectorCacheStats!
}

type RAGChunkMetadata {
  """条款编号"""
  articleNumber: String

  """chunk类型"""
  chunkType: String

  """章节标题"""
  title: String
}

type RAGContractChunk {
  chunkType: String!
  content: String!
  index: Int!
}

type RAGExtractResult {
  extractedData: JSONObject!
  query: String!
  retrievedChunks: [RetrievedChunk!]!
  topic: String!
}

type RAGQuestionAnswerResult {
  """相关文本片段"""
  chunkContent: String!

  """chunk元数据"""
  chunkMetadata: RAGChunkMetadata

  """合同ID"""
  contractId: ID!

  """合同名称"""
  contractName: String!

  """合同编号"""
  contractNo: String!

  """客户名称"""
  customerName: String!

  """相似度得分 (0-1)"""
  similarity: Float!
}

input RagParseInput {
  """需要提取的字段列表"""
  fields: [String!]!

  """每字段最大chunks数（默认3）"""
  maxChunksPerField: Int

  """合同文本内容"""
  text: String!
}

"""费率类型"""
enum RateType {
  DAILY
  HOURLY
  MONTHLY
}

input RecordPaymentInput {
  amount: Int!
  category: String
  contractId: String!
  description: String
  dueDate: String
  paymentDate: String
}

input RegenerateCaseStudyInput {
  customDisplayAmount: String
  customDisplayCustomerName: String
  customDisplayIndustry: String
  desensitize: Boolean
  desensitizeConfig: JSONObject

  """是否全部重新生成"""
  regenerateAll: Boolean = true
  regenerateChallenges: Boolean = false
  regenerateResults: Boolean = false
  regenerateSolution: Boolean = false
  regenerateTestimonial: Boolean = false
  writingStyle: String
}

input RegisterInput {
  departmentId: String!
  email: String!
  name: String!
  password: String!
}

input RejectMilestoneInput {
  id: ID!
  reason: String!
}

type RenewalItem {
  amount: Float!
  contractId: String!
  contractNo: String!
  customerName: String!
  daysUntilExpiry: Int!
  expiresAt: DateTime!
  priority: RenewalPriority!
  renewalProbability: Float!
}

type RenewalOverview {
  expiringThisMonth: Int!
  expiringThisQuarter: Int!
  renewalItems: [RenewalItem!]!
  renewalRate: Float!
  totalRenewalValue: Float!
}

"""续约优先级"""
enum RenewalPriority {
  HIGH
  LOW
  MEDIUM
}

type RenewalTerms {
  automaticRenewal: Boolean!
  noticePeriod: Duration
  renewalTerm: String
}

type ResetPasswordResult {
  success: Boolean!
  temporaryPassword: String!
}

input ResolveConflictsInput {
  fields: [String!]!
  method: String!
  parseResultId: String!
  userChoices: JSONObject
}

type ResourceUtilization {
  byRole: [RoleUtilization!]!
  monthlyTrend: [MonthlyUtilization!]!
  totalStaffContracts: Int!
}

type RetrievedChunk {
  content: String!
  similarity: Float!
}

input RevenueFilterInput {
  endDate: DateTime
  startDate: DateTime
  year: Int
}

type RevenueStats {
  byContractType: [TypeRevenue!]!
  byCustomer: [CustomerRevenue!]!
  byMonth: [MonthlyRevenue!]!
  totalRevenue: Float!
}

"""法务审查状态"""
enum ReviewStatus {
  APPROVED
  DRAFT
  IN_PROGRESS
  REJECTED
  SUBMITTED
}

type RiskAlert {
  alertType: String!
  contractId: String!
  createdAt: DateTime!
  id: String!
  message: String!
  severity: String!
}

input RiskAlertFilterInput {
  contractId: String
  endDate: String
  severity: RiskSeverity
  startDate: String
  status: AlertStatus
  type: RiskAlertType
}

type RiskAlertModel {
  contractId: String!
  createdAt: DateTime!
  description: String!
  dismissedAt: DateTime
  dismissedBy: String
  id: String!
  severity: RiskSeverity!
  status: AlertStatus!
  title: String!
  type: RiskAlertType!
  updatedAt: DateTime!
}

input RiskAlertPaginationInput {
  filter: RiskAlertFilterInput
  page: Int
  pageSize: Int
  sortBy: String
  sortOrder: String
}

"""风险告警类型"""
enum RiskAlertType {
  COMPLIANCE
  CONTRACT_EXPIRY
  FINANCIAL
  LEGAL
  OPERATIONAL
  PAYMENT_OVERDUE
}

type RiskAssessment {
  contractId: String!
  factors: [RiskFactorDetail!]!
  level: String!
  recommendations: [String!]!
  totalScore: Float!
}

type RiskAssessmentHistory {
  assessedAt: DateTime!
  assessedBy: String
  contractId: String!
  factors: JSONObject!
  id: String!
  recommendations: JSONObject
  riskLevel: String!
  totalScore: Float!
}

type RiskCell {
  category: String!
  contractCount: Int!
  riskLevel: String!
  riskScore: Float!
  subCategory: String!
  totalValue: Float!
}

type RiskClause {
  clauseType: String!
  content: String!
  riskLevel: String!
  suggestion: String!
}

type RiskFactor {
  description: String!
  factor: String!
  score: Float!
  weight: Float!
}

type RiskFactorDetail {
  description: String!
  factor: String!
  score: Float!
  weight: Float!
}

type RiskHeatmap {
  cells: [RiskCell!]!
  columns: [String!]!
  rows: [String!]!
  summary: RiskSummary!
}

"""风险等级"""
enum RiskLevel {
  CRITICAL
  HIGH
  LOW
  MEDIUM
}

type RiskLevelStats {
  count: Int!
  level: RiskLevel!
  percentage: Float!
}

type RiskOverview {
  avgRiskScore: Float!
  byRiskLevel: [RiskLevelStats!]!
  highRiskContracts: [ContractRiskScore!]!
  totalContracts: Int!
}

"""风险严重程度"""
enum RiskSeverity {
  CRITICAL
  HIGH
  LOW
  MEDIUM
}

type RiskSummary {
  avgRiskScore: Float!
  criticalRiskCount: Int!
  highRiskCount: Int!
  totalContracts: Int!
}

type RoleUtilization {
  count: Int!
  role: String!
  totalValue: Float!
}

type SalesPerformance {
  bySalesPerson: [SalesPersonPerformance!]!
  monthlyTrend: [MonthlySales!]!
  newSignValue: Float!
  renewalValue: Float!
  totalSalesValue: Float!
}

type SalesPersonPerformance {
  newSignValue: Float!
  renewalValue: Float!
  salesPerson: String!
  totalContracts: Int!
  totalValue: Float!
}

input SaveRiskAssessmentInput {
  assessedBy: String
  contractId: String!
  factors: String!
  recommendations: String
  riskLevel: String!
  totalScore: Int!
}

type SearchResponse {
  results: [ContractSearchResult!]!
  total: Int!
}

type SemanticChunkInfo {
  articleNumber: String
  endIndex: Int!
  fieldRelevance: [String!]!
  id: String!
  length: Int!
  pageHint: Int
  priority: Int!
  startIndex: Int!
  title: String
  type: String!
}

input SemanticChunkInput {
  """最小chunk大小（字符数，默认500）"""
  minChunkSize: Int

  """合同文本内容"""
  text: String!
}

type SemanticChunkResult {
  chunks: [SemanticChunkInfo!]!
  strategy: String!
  success: Boolean!
  summary: String
  totalLength: Int!
}

type SemanticSearchResult {
  contractId: String!
  contractNo: String!
  highlights: [String!]!
  name: String!
  similarity: Float!
}

input SendNotificationInput {
  content: String!
  subject: String!
  to: String!
  type: String
}

"""解析会话状态"""
enum SessionStatus {
  CHUNKING
  COMPLETED
  FAILED
  INITIALIZING
  LLM_PROCESSING
  MERGING
  PARSING
  UPLOADING
}

type SimilarContract {
  contractId: String!
  contractNo: String!
  customerName: String!
  matchReasons: [String!]!
  name: String!
  similarity: Float!
}

"""Sort direction"""
enum SortOrder {
  ASC
  DESC
}

type StaffAugmentationDetail {
  adjustmentMechanism: String
  estimatedTotalHours: String
  id: ID!
  monthlyHoursCap: String
  rateItems: [StaffRateItem!]!
  settlementCycle: String
  timesheetApprovalFlow: String
  yearlyHoursCap: String
}

input StaffAugmentationDetailInput {
  adjustmentMechanism: String
  estimatedTotalHours: Int
  monthlyHoursCap: Int
  rateItems: [StaffRateItemInput!]
  settlementCycle: String
  staffReplacementFlow: String
  timesheetApprovalFlow: String
  yearlyHoursCap: Int
}

type StaffRateItem {
  id: ID!
  rate: String!
  rateEffectiveFrom: DateTime
  rateEffectiveTo: DateTime
  rateType: RateType!
  role: String!
}

input StaffRateItemInput {
  rate: String!
  rateEffectiveFrom: DateTime
  rateEffectiveTo: DateTime
  rateType: RateType!
  role: String!
}

type StatusCount {
  count: Int!
  status: ContractStatus!
}

"""策略成本级别"""
enum StrategyCost {
  FREE
  HIGH
  LOW
  MEDIUM
}

type StrategyInfo {
  accuracy: Int
  available: Boolean!
  averageTime: Int
  cons: [String!]!
  cost: StrategyCost
  description: String
  errorMessage: String
  features: [String!]!
  name: String!
  pros: [String!]!
  type: ParseStrategyType!
}

type StrategyResult {
  confidence: Float
  contractType: String
  error: String
  fieldsExtracted: Int
  processingTimeMs: Int
  strategy: ParseStrategyType!
  success: Boolean!
}

type StrategyTestResult {
  available: Boolean!
  latency: Int
  message: String
  strategy: ParseStrategyType!
}

type StrategyVote {
  strategy: String!
  value: JSONObject!
  weight: Float!
}

type SuccessResponse {
  success: Boolean!
}

type SystemConfig {
  llmApiKey: String
  llmBaseUrl: String
  llmMaxTokens: Int
  llmModel: String!
  llmProvider: String!
  llmTemperature: Float
  llmTimeout: Int
  minioBucket: String!
  minioEndpoint: String!
  minioPort: Int!
  smtpEnabled: Boolean!
  smtpHost: String
  smtpPort: Int
  smtpSecure: Boolean
  smtpUser: String
}

type SystemHealth {
  api: Boolean!
  database: Boolean!
  databaseStatus: String
  storage: Boolean!
  storageStatus: String
  timestamp: String!
  uptime: Int!
  version: String!
}

type Tag {
  category: String!
  color: String!
  createdAt: DateTime!
  id: ID!
  isActive: Boolean!
  isSystem: Boolean!
  name: String!
  updatedAt: DateTime!
}

type TagDeleteResult {
  message: String
  success: Boolean!
}

type TagOverview {
  byCategory: [CategoryTags!]!
  topTags: [TagStats!]!
  totalTags: Int!
}

type TagStats {
  category: String
  color: String
  count: Int!
  tagId: String!
  tagName: String!
  totalValue: Float!
}

type TaskProgressInfo {
  data: JSONObject
  endTime: Int
  error: String
  infoType: InfoType!
  infoTypeName: String!
  startTime: Int
  status: TaskStatus!
  taskId: String!
}

"""任务处理状态"""
enum TaskStatus {
  COMPLETED
  FAILED
  PENDING
  PROCESSING
}

type TimeInfo {
  duration: String
  effectiveAt: String
  expiresAt: String
  signedAt: String
}

"""Completeness score for extraction results"""
type TopicCompletenessScore {
  """Maximum possible score"""
  maxScore: Float!

  """Overall score (0-100)"""
  score: Int!

  """Per-topic score breakdown"""
  topicScores: [TopicScoreBreakdown!]

  """Total weighted score achieved"""
  total: Float!
}

"""Definition of an extraction topic"""
type TopicDefinition {
  """Topic description"""
  description: String!

  """Display name"""
  displayName: String!

  """Fields in this topic"""
  fields: [TopicField!]!

  """Topic unique identifier"""
  name: ExtractTopic!

  """Execution order"""
  order: Int

  """LLM prompt template"""
  prompt: String

  """RAG query template"""
  query: String

  """Weight for completeness calculation"""
  weight: Float
}

"""Field definition within an extraction topic"""
type TopicField {
  """Default value"""
  defaultValue: String

  """Field description"""
  description: String

  """Field name"""
  name: String!

  """Whether this field is required"""
  required: Boolean!

  """Field data type"""
  type: String!
}

"""Field value with metadata"""
type TopicFieldValue {
  """Field description"""
  description: String

  """Whether field has a valid value"""
  hasValue: Boolean!

  """Field name"""
  name: String!

  """Field type"""
  type: String!

  """Field value as JSON string"""
  value: String
}

input TopicQueryDto {
  """Natural language query for the topic"""
  query: String!

  """Similarity threshold (0-1)"""
  threshold: Float

  """Number of chunks to retrieve"""
  topK: Int

  """Topic name (e.g., BASIC_INFO, FINANCIAL)"""
  topic: String!
}

"""Score breakdown for a single topic"""
type TopicScoreBreakdown {
  """Number of completed fields"""
  completedFields: Int!

  """Topic display name"""
  displayName: String!

  """Percentage complete (0-100)"""
  percentage: Int!

  """Score achieved (weighted)"""
  score: Float!

  """Topic name"""
  topicName: String!

  """Total number of fields"""
  totalFields: Int!

  """Weight used for this topic"""
  weight: Float!
}

"""财务交易状态"""
enum TransactionStatus {
  CANCELLED
  COMPLETED
  PENDING
}

"""财务交易类型"""
enum TransactionType {
  ADJUSTMENT
  PAYMENT
  RECEIPT
  REFUND
}

type TrendPoint {
  growth: Float
  period: String!
  value: Float!
}

type TypeRevenue {
  amount: Float!
  percentage: Float!
  type: ContractType!
}

input UpdateCaseStudyInput {
  challenges: String
  desensitizeConfig: JSONObject
  displayAmount: String
  displayCustomerName: String
  displayIndustry: String
  fullMarkdown: String
  isDesensitized: Boolean
  results: String
  solution: String
  subtitle: String
  summary: String
  tags: [String!]
  teamSize: String
  techStack: String
  testimonial: String
  timeline: String
  title: String
}

input UpdateCaseStudyStatusInput {
  status: CaseStudyStatus!
}

input UpdateContactInput {
  email: String
  isPrimary: Boolean
  name: String
  phone: String
  title: String
}

input UpdateContractInput {
  amountWithTax: String
  amountWithoutTax: String
  contractNo: String

  """合同份数"""
  copies: Float
  currency: String = "CNY"
  customerId: String

  """客户名称，当customerId不提供时用于创建新客户"""
  customerName: String
  departmentId: String
  duration: String
  effectiveAt: DateTime
  expiresAt: DateTime
  fileType: String
  fileUrl: String
  industry: String

  """Docling生成的markdown文本，用于向量化"""
  markdownText: String
  name: String
  needsManualReview: Boolean
  ourEntity: String
  parentContractId: String
  parseConfidence: Float
  parseStatus: ParseStatus
  parsedAt: DateTime
  paymentMethod: String
  paymentTerms: String

  """产品购销合同详情（产品清单等）"""
  productSalesDetail: ProductSalesDetailInput

  """项目外包合同详情（里程碑等）"""
  projectOutsourcingDetail: ProjectOutsourcingDetailInput
  salesPerson: String

  """签订地点"""
  signLocation: String
  signedAt: DateTime

  """人力框架合同详情（费率等）"""
  staffAugmentationDetail: StaffAugmentationDetailInput
  status: ContractStatus
  taxAmount: String
  taxRate: String
  type: ContractType
  uploadedById: String
}

input UpdateCustomerInput {
  address: String
  fullName: String
  industry: String
  shortName: String
  status: CustomerStatus
}

input UpdateDepartmentInput {
  code: String
  name: String
}

input UpdateFinancialTransactionInput {
  amount: Int
  category: String
  currency: String
  description: String
  dueDate: String
  metadata: String
  occurredAt: String
  status: TransactionStatus
  type: TransactionType
}

input UpdateLegalReviewInput {
  findings: String
  recommendations: String
  reviewedAt: String
  riskLevel: LegalRiskLevel
  status: ReviewStatus
}

input UpdateMilestoneStatusInput {
  id: ID!
  notes: String
  status: MilestoneStatus!
}

input UpdateNotificationPreferencesInput {
  contractApproval: Boolean
  contractExpiry: Boolean
  documentShared: Boolean
  enableEmail: Boolean
  enableInApp: Boolean
  enableSms: Boolean
  mention: Boolean
  milestoneDue: Boolean
  paymentOverdue: Boolean
  quietHoursEnd: String
  quietHoursStart: String
  riskAlert: Boolean
  systemAnnouncement: Boolean
  taskAssigned: Boolean
}

input UpdateParseStrategyConfigInput {
  autoMultiStrategy: Boolean
  defaultStrategy: ParseStrategyType
  enabledStrategies: [ParseStrategyType!]
  multiStrategyThreshold: Int
  multiStrategyVoters: [ParseStrategyType!]
}

input UpdateRiskAlertInput {
  description: String
  severity: RiskSeverity
  status: AlertStatus
  title: String
}

input UpdateSystemConfigInput {
  llmApiKey: String
  llmBaseUrl: String
  llmMaxTokens: Int
  llmModel: String
  llmProvider: String
  llmTemperature: Float
  llmTimeout: Int
  minioBucket: String
  minioEndpoint: String
  minioPort: Int
  smtpEnabled: Boolean
  smtpHost: String
  smtpPassword: String
  smtpPort: Int
  smtpSecure: Boolean
  smtpUser: String
}

input UpdateTagInput {
  category: String
  color: String
  name: String
}

input UpdateUserInput {
  departmentId: String
  email: String
  name: String
  role: UserRole
}

input UploadDeliverableInput {
  description: String
  fileName: String!
  fileUrl: String!
  milestoneId: ID!
}

type User {
  createdAt: DateTime!
  department: UserDepartment!
  email: String!
  id: ID!
  isActive: Boolean!
  lastPasswordChangedAt: DateTime
  mustChangePassword: Boolean!
  name: String!
  role: UserRole!
  updatedAt: DateTime!
}

type UserConnection {
  items: [User!]!
  page: Int!
  pageSize: Int!
  total: Int!
}

type UserDepartment {
  code: String!
  id: ID!
  name: String!
}

input UserFilterInput {
  departmentId: String
  isActive: Boolean
  role: UserRole
  search: String
}

"""User roles in the system"""
enum UserRole {
  ADMIN
  DEPT_ADMIN
  USER
}

"""向量缓存统计信息"""
type VectorCacheStats {
  """合同段落数量"""
  contractChunksCount: Int!

  """嵌入缓存数量"""
  embeddingCacheCount: Int!

  """LLM缓存数量"""
  llmCacheCount: Int!
}

type VectorizationResult {
  """Number of chunks created"""
  chunkCount: Int

  """Error code if failed"""
  error: String

  """Result message"""
  message: String!

  """Whether vectorization succeeded"""
  success: Boolean!

  """Vectorization timestamp"""
  vectorizedAt: DateTime
}

type VoteResult {
  agreedValue: JSONObject
  confidence: Float!
  fieldName: String!
  needsResolution: Boolean!
  resolutionMethod: String
  votes: [StrategyVote!]!
}

type VotingStrategyResult {
  confidence: Float
  error: String
  fields: JSONObject
  processingTimeMs: Int
  strategy: String!
  success: Boolean!
}